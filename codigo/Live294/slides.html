<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0"><meta name="apple-mobile-web-app-capable" content="yes"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta property="og:type" content="website"><meta name="twitter:card" content="summary"><style>@media screen{body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button{appearance:none;background-color:initial;border:0;color:inherit;cursor:pointer;font-size:inherit;opacity:.8;outline:none;padding:0;transition:opacity .2s linear;-webkit-tap-highlight-color:transparent}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:disabled,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:disabled,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:disabled,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button:disabled{cursor:not-allowed;opacity:.15!important}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:hover,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:hover,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:hover,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button:hover{opacity:1}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:active,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:active,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:hover:active,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button:hover:active{opacity:.6}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:not(:disabled),body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:not(:disabled),body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:hover:not(:disabled),body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button:hover:not(:disabled){transition:none}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev],body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button.bespoke-marp-presenter-info-page-prev{background:#0000 url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI1IiBkPSJNNjggOTAgMjggNTBsNDAtNDAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button.bespoke-marp-presenter-info-page-next{background:#0000 url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI1IiBkPSJtMzIgOTAgNDAtNDAtNDAtNDAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen]{background:#0000 url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48ZGVmcz48c3R5bGU+LmF7ZmlsbDpub25lO3N0cm9rZTojZmZmO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6NXB4fTwvc3R5bGU+PC9kZWZzPjxyZWN0IHdpZHRoPSI4MCIgaGVpZ2h0PSI2MCIgeD0iMTAiIHk9IjIwIiBjbGFzcz0iYSIgcng9IjUuNjciLz48cGF0aCBkPSJNNDAgNzBIMjBWNTBtMjAgMEwyMCA3MG00MC00MGgyMHYyMG0tMjAgMCAyMC0yMCIgY2xhc3M9ImEiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button.exit[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button.exit[data-bespoke-marp-osc=fullscreen]{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48ZGVmcz48c3R5bGU+LmF7ZmlsbDpub25lO3N0cm9rZTojZmZmO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6NXB4fTwvc3R5bGU+PC9kZWZzPjxyZWN0IHdpZHRoPSI4MCIgaGVpZ2h0PSI2MCIgeD0iMTAiIHk9IjIwIiBjbGFzcz0iYSIgcng9IjUuNjciLz48cGF0aCBkPSJNMjAgNTBoMjB2MjBtLTIwIDAgMjAtMjBtNDAgMEg2MFYzMG0yMCAwTDYwIDUwIiBjbGFzcz0iYSIvPjwvc3ZnPg==")}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter]{background:#0000 url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI1IiBkPSJNODcuOCA0Ny41Qzg5IDUwIDg3LjcgNTIgODUgNTJIMzVhOC43IDguNyAwIDAgMS03LjItNC41bC0xNS42LTMxQzExIDE0IDEyLjIgMTIgMTUgMTJoNTBhOC44IDguOCAwIDAgMSA3LjIgNC41ek02MCA1MnYzNm0tMTAgMGgyME00NSA0MmgyMCIvPjwvc3ZnPg==") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button.bespoke-marp-presenter-note-bigger{background:#0000 url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI1IiBkPSJNMTIgNTBoODBNNTIgOTBWMTAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button.bespoke-marp-presenter-note-smaller{background:#0000 url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI1IiBkPSJNMTIgNTBoODAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}}@keyframes __bespoke_marp_transition_reduced_outgoing__{0%{opacity:1}to{opacity:0}}@keyframes __bespoke_marp_transition_reduced_incoming__{0%{mix-blend-mode:plus-lighter;opacity:0}to{mix-blend-mode:plus-lighter;opacity:1}}.bespoke-marp-note,.bespoke-marp-osc,.bespoke-progress-parent{display:none;transition:none}@media screen{::view-transition-group(*){animation-duration:var(--marp-bespoke-transition-animation-duration,.5s);animation-timing-function:ease}::view-transition-new(*),::view-transition-old(*){animation-delay:0s;animation-direction:var(--marp-bespoke-transition-animation-direction,normal);animation-duration:var(--marp-bespoke-transition-animation-duration,.5s);animation-fill-mode:both;animation-name:var(--marp-bespoke-transition-animation-name,var(--marp-bespoke-transition-animation-name-fallback,__bespoke_marp_transition_no_animation__));mix-blend-mode:normal}::view-transition-old(*){--marp-bespoke-transition-animation-name-fallback:__bespoke_marp_transition_reduced_outgoing__;animation-timing-function:ease}::view-transition-new(*){--marp-bespoke-transition-animation-name-fallback:__bespoke_marp_transition_reduced_incoming__;animation-timing-function:ease}::view-transition-new(root),::view-transition-old(root){animation-timing-function:linear}::view-transition-new(__bespoke_marp_transition_osc__),::view-transition-old(__bespoke_marp_transition_osc__){animation-duration:0s!important;animation-name:__bespoke_marp_transition_osc__!important}::view-transition-new(__bespoke_marp_transition_osc__){opacity:0!important}.bespoke-marp-transition-warming-up::view-transition-group(*),.bespoke-marp-transition-warming-up::view-transition-new(*),.bespoke-marp-transition-warming-up::view-transition-old(*){animation-play-state:paused!important}body,html{height:100%;margin:0}body{background:#000;overflow:hidden}svg.bespoke-marp-slide{content-visibility:hidden;opacity:0;pointer-events:none;z-index:-1}svg.bespoke-marp-slide:not(.bespoke-marp-active) *{view-transition-name:none!important}svg.bespoke-marp-slide.bespoke-marp-active{content-visibility:visible;opacity:1;pointer-events:auto;z-index:0}svg.bespoke-marp-slide.bespoke-marp-active.bespoke-marp-active-ready *{animation-name:__bespoke_marp__!important}@supports not (content-visibility:hidden){svg.bespoke-marp-slide[data-bespoke-marp-load=hideable]{display:none}svg.bespoke-marp-slide[data-bespoke-marp-load=hideable].bespoke-marp-active{display:block}}}@media screen and (prefers-reduced-motion:reduce){svg.bespoke-marp-slide *{view-transition-name:none!important}}@media screen{[data-bespoke-marp-fragment=inactive]{visibility:hidden}body[data-bespoke-view=""] .bespoke-marp-parent,body[data-bespoke-view=next] .bespoke-marp-parent{inset:0;position:absolute}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc{background:#000000a6;border-radius:7px;bottom:50px;color:#fff;contain:paint;display:block;font-family:Helvetica,Arial,sans-serif;font-size:16px;left:50%;line-height:0;opacity:1;padding:12px;position:absolute;touch-action:manipulation;transform:translateX(-50%);transition:opacity .2s linear;-webkit-user-select:none;user-select:none;white-space:nowrap;will-change:transform;z-index:1;view-transition-name:__bespoke_marp_transition_osc__}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>*,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>*{margin-left:6px}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>:first-child,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>:first-child{margin-left:0}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>span,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>span{opacity:.8}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>span[data-bespoke-marp-osc=page],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>span[data-bespoke-marp-osc=page]{display:inline-block;min-width:140px;text-align:center}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter],body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev]{height:32px;line-height:32px;width:32px}body[data-bespoke-view=""] .bespoke-marp-parent.bespoke-marp-inactive,body[data-bespoke-view=next] .bespoke-marp-parent.bespoke-marp-inactive{cursor:none}body[data-bespoke-view=""] .bespoke-marp-parent.bespoke-marp-inactive>.bespoke-marp-osc,body[data-bespoke-view=next] .bespoke-marp-parent.bespoke-marp-inactive>.bespoke-marp-osc{opacity:0;pointer-events:none}body[data-bespoke-view=""] svg.bespoke-marp-slide,body[data-bespoke-view=next] svg.bespoke-marp-slide{height:100%;left:0;position:absolute;top:0;width:100%}body[data-bespoke-view=""] .bespoke-progress-parent{background:#222;display:flex;height:5px;width:100%}body[data-bespoke-view=""] .bespoke-progress-parent+.bespoke-marp-parent{top:5px}body[data-bespoke-view=""] .bespoke-progress-parent .bespoke-progress-bar{background:#0288d1;flex:0 0 0;transition:flex-basis .2s cubic-bezier(0,1,1,1)}body[data-bespoke-view=next]{background:#0000}body[data-bespoke-view=presenter]{background:#161616}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container{display:grid;font-family:Helvetica,Arial,sans-serif;grid-template:"current dragbar next" minmax(140px,1fr) "current dragbar note" 2fr "info    dragbar note" 3em;grid-template-columns:minmax(3px,var(--bespoke-marp-presenter-split-ratio,66%)) 0 minmax(3px,1fr);height:100%;left:0;position:absolute;top:0;width:100%}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-parent{grid-area:current;overflow:hidden;position:relative}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-parent svg.bespoke-marp-slide{height:calc(100% - 40px);left:20px;pointer-events:none;position:absolute;top:20px;-webkit-user-select:none;user-select:none;width:calc(100% - 40px)}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-parent svg.bespoke-marp-slide.bespoke-marp-active{filter:drop-shadow(0 3px 10px rgba(0,0,0,.5))}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-dragbar-container{background:#0288d1;cursor:col-resize;grid-area:dragbar;margin-left:-3px;opacity:0;position:relative;transition:opacity .4s linear .1s;width:6px;z-index:10}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-dragbar-container:hover{opacity:1}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-dragbar-container.active{opacity:1;transition-delay:0s}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-next-container{background:#222;cursor:pointer;display:none;grid-area:next;overflow:hidden;position:relative}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-next-container.active{display:block}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-next-container iframe.bespoke-marp-presenter-next{background:#0000;border:0;display:block;filter:drop-shadow(0 3px 10px rgba(0,0,0,.5));height:calc(100% - 40px);left:20px;pointer-events:none;position:absolute;top:20px;-webkit-user-select:none;user-select:none;width:calc(100% - 40px)}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container{background:#222;color:#eee;grid-area:note;position:relative;z-index:1}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button{height:1.5em;line-height:1.5em;width:1.5em}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-presenter-note-wrapper{display:block;inset:0;position:absolute}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-presenter-note-buttons{background:#000000a6;border-radius:4px;bottom:0;display:flex;gap:4px;margin:12px;opacity:0;padding:6px;pointer-events:none;position:absolute;right:0;transition:opacity .2s linear}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-presenter-note-buttons:focus-within,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-presenter-note-wrapper:focus-within+.bespoke-marp-presenter-note-buttons,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container:hover .bespoke-marp-presenter-note-buttons{opacity:1;pointer-events:auto}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note{box-sizing:border-box;font-size:calc(1.1em*var(--bespoke-marp-note-font-scale, 1));height:calc(100% - 40px);margin:20px;overflow:auto;padding-right:3px;white-space:pre-wrap;width:calc(100% - 40px);word-wrap:break-word;scrollbar-color:#eeeeee80 #0000;scrollbar-width:thin}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note::-webkit-scrollbar{width:6px}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note::-webkit-scrollbar-track{background:#0000}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note::-webkit-scrollbar-thumb{background:#eeeeee80;border-radius:6px}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note:empty{pointer-events:none}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note.active{display:block}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note p:first-child{margin-top:0}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note p:last-child{margin-bottom:0}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container{align-items:center;box-sizing:border-box;color:#eee;display:flex;flex-wrap:nowrap;grid-area:info;justify-content:center;overflow:hidden;padding:0 10px}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-page,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-time,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-timer{box-sizing:border-box;display:block;padding:0 10px;white-space:nowrap;width:100%}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button{height:1.5em;line-height:1.5em;width:1.5em}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-page{order:2;text-align:center}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-page .bespoke-marp-presenter-info-page-text{display:inline-block;min-width:120px;text-align:center}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-time{color:#999;order:1;text-align:left}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-timer{color:#999;order:3;text-align:right}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-timer:hover{cursor:pointer}}@media print{.bespoke-marp-presenter-info-container,.bespoke-marp-presenter-next-container,.bespoke-marp-presenter-note-container{display:none}}</style><style>@import url('https://fonts.googleapis.com/css2?family=Big+Shoulders+Text:wght@400;700&display=swap');@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;500;700;900&display=swap');div#\:\$p > svg > foreignObject > section{width:1280px;height:720px;box-sizing:border-box;overflow:hidden;position:relative;scroll-snap-align:center center;-webkit-text-size-adjust:100%;text-size-adjust:100%}div#\:\$p > svg > foreignObject > section::after{bottom:0;content:attr(data-marpit-pagination);padding:inherit;pointer-events:none;position:absolute;right:0}div#\:\$p > svg > foreignObject > section:not([data-marpit-pagination])::after{display:none}div#\:\$p > svg > foreignObject > section :is(h1, marp-h1){font-size:2em;margin:0.67em 0}div#\:\$p > svg > foreignObject > section video::-webkit-media-controls{will-change:transform}@page {size:960px 720px;margin:0}@media print{html, body{background-color:#fff;margin:0;page-break-inside:avoid;break-inside:avoid-page}div#\:\$p > svg > foreignObject > section{page-break-before:always;break-before:page}div#\:\$p > svg > foreignObject > section, div#\:\$p > svg > foreignObject > section *{-webkit-print-color-adjust:exact!important;animation-delay:0s!important;animation-duration:0s!important;color-adjust:exact!important;transition:none!important}div#\:\$p > svg[data-marpit-svg]{display:block;height:100vh;width:100vw}}div#\:\$p > svg > foreignObject > :where(section){container-type:size}div#\:\$p > svg > foreignObject > section img[data-marp-twemoji]{background:transparent;height:1em;margin:0 .05em 0 .1em;vertical-align:-.1em;width:1em}div#\:\$p > svg > foreignObject > :where(section):not([\20 root]){width:960px;height:720px;font-family:'Roboto', sans-serif;font-size:22px;padding:20px;font-variation-settings:'wght' 300;--first-color: #fedd8e;--second-color: #ff8e7b;--font-color: #2a2a2a;--muted: #6e6a86;--subtle: #908caa;--text: #e0def4;--love: #eb6f92;--foam: #9ccfd8;--iris: #c4a7e7;--literal: var(--text);--strings: var(--first-color);--title: #fd971f;--number: #ae81ff;--built-in: #66d9ef;--meta: #F067A0;--keyword: var(--second-color);--code-bg: var(--font-color);--shadow: rgba(0, 0, 0, 0.35);--snake-size: 50px;}div#\:\$p > svg > foreignObject > :where(section):not([\20 root]){--marpit-root-font-size: 22px;}div#\:\$p > svg > foreignObject > section :is(h1, marp-h1){color:var(--font-color);font-family:'Big Shoulders Text', cursive;font-size:42px;font-variation-settings:'wght' 500;margin:18px;margin-left:55px;margin-top:65px}div#\:\$p > svg > foreignObject > section :is(h2, marp-h2), div#\:\$p > svg > foreignObject > section :is(h3, marp-h3), div#\:\$p > svg > foreignObject > section :is(h4, marp-h4), div#\:\$p > svg > foreignObject > section :is(h5, marp-h5), div#\:\$p > svg > foreignObject > section :is(h6, marp-h6){padding:0.4em;color:var(--font-color);font-family:'Big Shoulders Text', cursive}div#\:\$p > svg > foreignObject > section p{padding-left:45px;padding-right:45px;line-height:1.5;margin-top:2px;color:var(--font-color)}div#\:\$p > svg > foreignObject > section b, div#\:\$p > svg > foreignObject > section strong{color:var(--font-color);font-variation-settings:'wght' 700}div#\:\$p > svg > foreignObject > section a{color:var(--font-color)}div#\:\$p > svg > foreignObject > section ul, div#\:\$p > svg > foreignObject > section li, div#\:\$p > svg > foreignObject > section ol{list-style-position:inside;line-height:1.5;padding-left:25px;padding-right:25px}div#\:\$p > svg > foreignObject > section li ul{font-size:22px;padding-left:5px}div#\:\$p > svg > foreignObject > section :is(li ul) code{font-size:22px}div#\:\$p > svg > foreignObject > section :is(pre, marp-pre){margin-left:45px;margin-right:45px;line-height:1.15;background-color:var(--code-bg);padding:15px;padding-left:20px;box-shadow:var(--shadow) 0px 5px 15px;border-radius:10px}div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) code{font-size:18px;line-height:1.3;color:var(--text)}div#\:\$p > svg > foreignObject > section blockquote{margin-left:8px}div#\:\$p > svg > foreignObject > section blockquote p{font-size:18px;line-height:1.3}div#\:\$p > svg > foreignObject > section figcaption{font-family:'Big Shoulders Text', cursive;font-variation-settings:'wght' 500;font-size:30px;margin-top:5px;color:var(--code-bg)}div#\:\$p > svg > foreignObject > section table{border-spacing:0px;margin:auto;width:50%;margin-bottom:20px}div#\:\$p > svg > foreignObject > section th{background-color:var(--font-color);font-family:'Big Shoulders Text', cursive;font-variation-settings:'wght' 500;padding:10px;font-size:18px}div#\:\$p > svg > foreignObject > section th, div#\:\$p > svg > foreignObject > section tr, div#\:\$p > svg > foreignObject > section td{font-size:18px;margin:0px;border:1px solid var(--font-color);border-top:0px;padding:4px;text-align:center;width:25%}div#\:\$p > svg > foreignObject > section th:nth-child(even), div#\:\$p > svg > foreignObject > section td:nth-child(even){border-right:none;border-left:none}div#\:\$p > svg > foreignObject > section th:last-child, div#\:\$p > svg > foreignObject > section td:last-child{border-right:1px solid var(--font-color)}div#\:\$p > svg > foreignObject > section .hljs-comment{color:var(--muted)}div#\:\$p > svg > foreignObject > section .hljs-attr{color:var(--foam)}div#\:\$p > svg > foreignObject > section .hljs-punctuation{color:var(--subtle)}div#\:\$p > svg > foreignObject > section .hljs-string{color:var(--strings)}div#\:\$p > svg > foreignObject > section .hljs-title{color:var(--title)}div#\:\$p > svg > foreignObject > section .hljs-keyword{color:var(--keyword)}div#\:\$p > svg > foreignObject > section .hljs-variable{color:var(--text)}div#\:\$p > svg > foreignObject > section .hljs-literal{color:var(--literal)}div#\:\$p > svg > foreignObject > section .hljs-type{color:var(--love)}div#\:\$p > svg > foreignObject > section .hljs-number{color:var(--number)}div#\:\$p > svg > foreignObject > section .hljs-built_in{color:var(--built-in)}div#\:\$p > svg > foreignObject > section .hljs-params{color:var(--iris)}div#\:\$p > svg > foreignObject > section .hljs-symbol{color:var(--foam)}div#\:\$p > svg > foreignObject > section .hljs-meta{color:var(--meta)}div#\:\$p > svg > foreignObject > section .hljs-tag{color:var(--strings)}div#\:\$p > svg > foreignObject > section .hljs-name{color:var(--keyword)}div#\:\$p > svg > foreignObject > section .hljs-section{color:var(--keyword)}div#\:\$p > svg > foreignObject > section .hljs-attr{color:var(--meta)}div#\:\$p > svg > foreignObject > section{color:var(--font-color);background-color:var(--first-color);position:relative;box-sizing:border-box;margin:0 auto;padding-top:120px;padding-left:20px;padding-right:20px;padding-bottom:20px}div#\:\$p > svg > foreignObject > section th{color:var(--first-color)}div#\:\$p > svg > foreignObject > section.red, div#\:\$p > svg > foreignObject > section.d-red, div#\:\$p > svg > foreignObject > section.nb-red, div#\:\$p > svg > foreignObject > section.c-red, div#\:\$p > svg > foreignObject > section.apoia, div#\:\$p > svg > foreignObject > section.summary{background-color:var(--second-color)}div#\:\$p > svg > foreignObject > section.red th,div#\:\$p > svg > foreignObject > section.d-red th,div#\:\$p > svg > foreignObject > section.nb-red th,div#\:\$p > svg > foreignObject > section.c-red th,div#\:\$p > svg > foreignObject > section.apoia th,div#\:\$p > svg > foreignObject > section.summary th{color:var(--second-color)}div#\:\$p > svg > foreignObject > section.d-yellow :is(h1, marp-h1)::after{content:"🐍";font-size:var(--snake-size);margin-left:10px;position:absolute;top:50%;transform:translateY(-50%)}div#\:\$p > svg > foreignObject > section.d-red :is(h1, marp-h1)::after{content:"🐍";font-size:var(--snake-size);margin-left:10px;position:absolute;top:50%;transform:translateY(-50%)}div#\:\$p > svg > foreignObject > section.nb-yellow :is(h1, marp-h1)::after{content:"🐍";font-size:var(--snake-size);margin-left:10px;position:absolute;top:50%;transform:translateY(-50%)}div#\:\$p > svg > foreignObject > section.nb-red :is(h1, marp-h1)::after{content:"🐍";font-size:var(--snake-size);margin-left:10px;position:absolute;top:50%;transform:translateY(-50%)}div#\:\$p > svg > foreignObject > section.summary :is(h1, marp-h1)::after{content:"🐍";font-size:var(--snake-size);margin-left:10px;position:absolute;top:50%;transform:translateY(-50%)}div#\:\$p > svg > foreignObject > section.c-yellow :is(h1, marp-h1)::after{content:"🐍";font-size:var(--snake-size);margin-left:10px;position:absolute;top:50%;transform:translateY(-50%)}div#\:\$p > svg > foreignObject > section.c-red :is(h1, marp-h1)::after{content:"🐍";font-size:var(--snake-size);margin-left:10px;position:absolute;top:50%;transform:translateY(-50%)}div#\:\$p > svg > foreignObject > section.help :is(h1, marp-h1)::after{content:"🐍";font-size:var(--snake-size);margin-left:10px;position:absolute;top:50%;transform:translateY(-50%)}div#\:\$p > svg > foreignObject > section.apoia :is(h1, marp-h1)::after{content:"🐍";font-size:var(--snake-size);margin-left:10px;position:absolute;top:50%;transform:translateY(-50%)}div#\:\$p > svg > foreignObject > section.d-yellow :is(h1, marp-h1)::after{right:60px}div#\:\$p > svg > foreignObject > section.d-red :is(h1, marp-h1)::after{right:60px}div#\:\$p > svg > foreignObject > section.nb-yellow :is(h1, marp-h1)::after{right:60px}div#\:\$p > svg > foreignObject > section.nb-red :is(h1, marp-h1)::after{right:60px}div#\:\$p > svg > foreignObject > section.summary :is(h1, marp-h1)::after{right:60px}div#\:\$p > svg > foreignObject > section.c-yellow :is(h1, marp-h1)::after{right:60px}div#\:\$p > svg > foreignObject > section.c-red :is(h1, marp-h1)::after{right:60px}div#\:\$p > svg > foreignObject > section.help :is(h1, marp-h1)::after{right:60px}div#\:\$p > svg > foreignObject > section.apoia :is(h1, marp-h1)::after{right:60px}div#\:\$p > svg > foreignObject > section.d-yellow :is(h1, marp-h1),div#\:\$p > svg > foreignObject > section.d-red :is(h1, marp-h1),div#\:\$p > svg > foreignObject > section.nb-yellow :is(h1, marp-h1),div#\:\$p > svg > foreignObject > section.nb-red :is(h1, marp-h1),div#\:\$p > svg > foreignObject > section.summary :is(h1, marp-h1){position:absolute;padding:0.4em;padding-left:1em;margin:0;top:75px;left:34px;right:34px;z-index:10}div#\:\$p > svg > foreignObject > section.d-yellow :is(h1, marp-h1) + *,div#\:\$p > svg > foreignObject > section.d-red :is(h1, marp-h1) + *,div#\:\$p > svg > foreignObject > section.nb-yellow :is(h1, marp-h1) + *,div#\:\$p > svg > foreignObject > section.nb-red :is(h1, marp-h1) + *,div#\:\$p > svg > foreignObject > section.summary :is(h1, marp-h1) + *{padding-top:150px}div#\:\$p > svg > foreignObject > section.d-yellow{outline:solid;outline-offset:-35px;position:relative}div#\:\$p > svg > foreignObject > section.d-yellow :is(h1, marp-h1){color:var(--first-color);background-color:var(--font-color)}div#\:\$p > svg > foreignObject > section.d-red{outline:solid;outline-offset:-35px;position:relative}div#\:\$p > svg > foreignObject > section.d-red :is(h1, marp-h1){color:var(--second-color);background-color:var(--font-color)}div#\:\$p > svg > foreignObject > section.nb-red :is(h1, marp-h1){color:var(--second-color);background-color:var(--font-color)}div#\:\$p > svg > foreignObject > section.nb-yellow{background-color:var(--first-color)}div#\:\$p > svg > foreignObject > section.nb-yellow :is(h1, marp-h1){color:var(--first-color);background-color:var(--font-color)}div#\:\$p > svg > foreignObject > section.summary :is(h1, marp-h1){color:var(--second-color);background-color:var(--font-color)}div#\:\$p > svg > foreignObject > section.summary .lados{display:flex;gap:30px;margin:20px}div#\:\$p > svg > foreignObject > section.summary .lado-a,div#\:\$p > svg > foreignObject > section.summary .lado-b{flex:1;margin:0px;padding:20px;outline:solid}div#\:\$p > svg > foreignObject > section.summary .lado-a ol,div#\:\$p > svg > foreignObject > section.summary .lado-b ol{margin:0px;margin-top:50px;padding:0px}div#\:\$p > svg > foreignObject > section.summary .lado-a li,div#\:\$p > svg > foreignObject > section.summary .lado-b li{font-family:'Big Shoulders Text', cursive;font-variation-settings:'wght' 500;font-size:35px;margin:10px;margin-bottom:3px;padding:0px}div#\:\$p > svg > foreignObject > section.summary .lado-a p,div#\:\$p > svg > foreignObject > section.summary .lado-b p{font-size:20px;margin-top:0px;margin-left:10px;margin-bottom:15%;padding:0px}div#\:\$p > svg > foreignObject > section.title{outline:solid;outline-offset:-35px}div#\:\$p > svg > foreignObject > section.title :is(h2, marp-h2){font-family:'Big Shoulders Text', cursive;font-variation-settings:'wght' 600;font-size:45px;text-align:center;margin-top:40%}div#\:\$p > svg > foreignObject > section.title img{width:300px;display:block;margin:0 auto;margin-top:45px;margin-bottom:0;filter:drop-shadow(0px 5px 15px var(--shadow))}div#\:\$p > svg > foreignObject > section.title img + :is(h2, marp-h2){margin-top:5%}div#\:\$p > svg > foreignObject > section.title :is(h1, marp-h1){color:var(--first-color);background-color:var(--font-color);position:absolute;padding:0.4em;padding-left:1em;margin:0;top:75%;left:34px;right:34px;z-index:10;text-align:center}div#\:\$p > svg > foreignObject > section.c-yellow :is(h1, marp-h1)::before{content:"🐍";font-size:var(--snake-size);position:absolute;top:50%;transform:translateY(-50%);left:60px}div#\:\$p > svg > foreignObject > section.c-red :is(h1, marp-h1)::before{content:"🐍";font-size:var(--snake-size);position:absolute;top:50%;transform:translateY(-50%);left:60px}div#\:\$p > svg > foreignObject > section.help :is(h1, marp-h1)::before{content:"🐍";font-size:var(--snake-size);position:absolute;top:50%;transform:translateY(-50%);left:60px}div#\:\$p > svg > foreignObject > section.apoia :is(h1, marp-h1)::before{content:"🐍";font-size:var(--snake-size);position:absolute;top:50%;transform:translateY(-50%);left:60px}div#\:\$p > svg > foreignObject > section.c-yellow, div#\:\$p > svg > foreignObject > section.c-red, div#\:\$p > svg > foreignObject > section.help, div#\:\$p > svg > foreignObject > section.apoia{outline:solid;outline-offset:-35px;position:relative}div#\:\$p > svg > foreignObject > section.c-yellow :is(h1, marp-h1),div#\:\$p > svg > foreignObject > section.c-red :is(h1, marp-h1),div#\:\$p > svg > foreignObject > section.help :is(h1, marp-h1),div#\:\$p > svg > foreignObject > section.apoia :is(h1, marp-h1){position:absolute;padding:0.4em;padding-left:1em;margin:0;top:77%;left:34px;right:34px;z-index:10;text-align:center}div#\:\$p > svg > foreignObject > section.c-yellow p,div#\:\$p > svg > foreignObject > section.help p{color:var(--font-color)}div#\:\$p > svg > foreignObject > section.c-yellow :is(h1, marp-h1),div#\:\$p > svg > foreignObject > section.help :is(h1, marp-h1){color:var(--first-color);background-color:var(--font-color)}div#\:\$p > svg > foreignObject > section.c-red p{color:var(--font-color)}div#\:\$p > svg > foreignObject > section.c-red :is(h1, marp-h1){color:var(--second-color);background-color:var(--font-color)}div#\:\$p > svg > foreignObject > section.c-yellow p,div#\:\$p > svg > foreignObject > section.c-red p{font-variation-settings:'wght' 300;font-size:35px;text-align:center;margin:35px;top:40%;position:absolute}div#\:\$p > svg > foreignObject > section.apoia p{font-variation-settings:'wght' 300;font-size:13px;text-align:justify;margin-left:-15px;margin-top:25px;position:absolute;text-justify:inter-word}div#\:\$p > svg > foreignObject > section.apoia :is(h1, marp-h1){color:var(--second-color);background-color:var(--font-color)}div#\:\$p > svg > foreignObject > section.help{display:flex;justify-content:center;align-items:flex-start;padding-top:140px;gap:15px}div#\:\$p > svg > foreignObject > section.help figure{margin:0;text-align:center}div#\:\$p > svg > foreignObject > section.help img{border-radius:12px;max-width:280px;display:block;margin:0 auto;box-shadow:inset 0 0 0 12px var(--code-bg)}div#\:\$p > svg > foreignObject > section.s-yellow, div#\:\$p > svg > foreignObject > section.s-red{display:flex;flex-direction:row;gap:20px}div#\:\$p > svg > foreignObject > section.s-yellow :is(h1, marp-h1),div#\:\$p > svg > foreignObject > section.s-red :is(h1, marp-h1){flex:4;display:flex;flex-direction:column;justify-content:flex-end;color:var(--first-color);background-color:var(--code-bg);font-size:550%;padding-left:15px;padding-right:15px;padding-bottom:15px;text-align:left;line-height:1.1;height:97%;margin:0}div#\:\$p > svg > foreignObject > section.s-yellow :is(h2, marp-h2),div#\:\$p > svg > foreignObject > section.s-red :is(h2, marp-h2){flex:6;display:flex;flex-direction:column;justify-content:flex-end;height:90%;line-height:1.1;text-align:right;font-size:300%;font-variation-settings:'wght' 400;outline:solid;margin:0}div#\:\$p > svg > foreignObject > section.s-red{background-color:var(--second-color)}div#\:\$p > svg > foreignObject > section.s-red :is(h1, marp-h1){color:var(--second-color);text-align:right}div#\:\$p > svg > foreignObject > section.s-red :is(h2, marp-h2){text-align:left}div#\:\$p > svg > foreignObject > section div.mermaid{margin:0 auto;width:80%}div#\:\$p > svg > foreignObject > section .mermaid p{font-size:24px;font-family:'Big Shoulders Text', cursive;font-variation-settings:'wght' 600;text-align:center}div#\:\$p > svg > foreignObject > section .lados{display:flex;justify-content:center}div#\:\$p > svg > foreignObject > section[data-marpit-scope-sd7BopDY].summary .lado-a p, div#\:\$p > svg > foreignObject > section[data-marpit-scope-sd7BopDY].summary .lado-b p{margin-bottom:30%}div#\:\$p > svg > foreignObject > section[data-marpit-scope-chVRoFtU] :is(h3, marp-h3){margin-left:35px;margin-right:10px;margin-bottom:0px;font-family:"Roboto"}div#\:\$p > svg > foreignObject > section[data-marpit-scope-chVRoFtU] blockquote{margin-top:0px;margin-bottom:35px;margin-left:26%}div#\:\$p > svg > foreignObject > section[data-marpit-scope-xQHerM7y] :is(h3, marp-h3){margin-left:35px;margin-right:10px;margin-bottom:0px;font-family:"Roboto"}div#\:\$p > svg > foreignObject > section[data-marpit-scope-xQHerM7y] blockquote{margin-top:0px;margin-bottom:35px;margin-left:26%}div#\:\$p > svg > foreignObject > section[data-marpit-scope-V0SmNCpN] li{margin-bottom:15px}div#\:\$p > svg > foreignObject > section[data-marpit-scope-UOQqsmSY] img{width:100%;filter:drop-shadow(0px 5px 15px var(--shadow))}div#\:\$p > svg > foreignObject > section[data-marpit-scope-4r3RuxBi] img{width:180px;filter:drop-shadow(0px 5px 15px var(--shadow))}div#\:\$p > svg > foreignObject > section[data-marpit-scope-4r3RuxBi] :is(span, marp-span){margin-left:-10px}div#\:\$p > svg > foreignObject > section[data-marpit-scope-J6moY6fI] img{width:100%;filter:drop-shadow(0px 5px 15px var(--shadow))}div#\:\$p > svg > foreignObject > section[data-marpit-scope-eglYITgV] :is(h3, marp-h3){margin-left:35px;margin-right:10px;margin-bottom:0px;font-family:"Roboto"}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"]{columns:initial!important;display:block!important;padding:0!important}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"]::before, div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"]::after, div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="content"]::before, div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="content"]::after{display:none!important}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"] > div[data-marpit-advanced-background-container]{all:initial;display:flex;flex-direction:row;height:100%;overflow:hidden;width:100%}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"] > div[data-marpit-advanced-background-container][data-marpit-advanced-background-direction="vertical"]{flex-direction:column}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"][data-marpit-advanced-background-split] > div[data-marpit-advanced-background-container]{width:var(--marpit-advanced-background-split, 50%)}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"][data-marpit-advanced-background-split="right"] > div[data-marpit-advanced-background-container]{margin-left:calc(100% - var(--marpit-advanced-background-split, 50%))}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"] > div[data-marpit-advanced-background-container] > figure{all:initial;background-position:center;background-repeat:no-repeat;background-size:cover;flex:auto;margin:0}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"] > div[data-marpit-advanced-background-container] > figure > figcaption{position:absolute;border:0;clip:rect(0, 0, 0, 0);height:1px;margin:-1px;overflow:hidden;padding:0;white-space:nowrap;width:1px}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="content"], div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="pseudo"]{background:transparent!important}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="pseudo"], div#\:\$p > svg[data-marpit-svg] > foreignObject[data-marpit-advanced-background="pseudo"]{pointer-events:none!important}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background-split]{width:100%;height:100%}
</style></head><body><div class="bespoke-marp-osc"><button data-bespoke-marp-osc="prev" tabindex="-1" title="Previous slide">Previous slide</button><span data-bespoke-marp-osc="page"></span><button data-bespoke-marp-osc="next" tabindex="-1" title="Next slide">Next slide</button><button data-bespoke-marp-osc="fullscreen" tabindex="-1" title="Toggle fullscreen (f)">Toggle fullscreen</button><button data-bespoke-marp-osc="presenter" tabindex="-1" title="Open presenter view (p)">Open presenter view</button></div><div id=":$p"><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="1" data-class="title" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="title" style="--class:title;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="live-de-python--294">Live de Python # 294</h1>
<img src="https://faststream.ag2.ai/latest/assets/img/logo.svg" />
<h2 id="event-driven-archtecture-com-faststream">Event-Driven Archtecture com FastStream</h2>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="2" data-marpit-scope-sd7BopDY="" data-class="summary" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="summary" style="--class:summary;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="roteiro">Roteiro</h1>
<div class="lados">
<div class="lado-a">
<ol>
<li>Event-Driven Archtecture</li>
</ol>
<p>(EDA) Um pouco de teoria antes :)</p>
<ol start="2">
<li>FastStream</li>
</ol>
<p>Uma introdução ao pub/sub</p>
</div>
<div class="lado-b">
<ol start="3">
<li>Lidando com erros</li>
</ol>
<p>retry, backoff e etc...</p>
<ol start="4">
<li>Agendamento</li>
</ol>
<p>Usando bibliotecas externas</p>
</div>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="3" data-class="help" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="help" style="--class:help;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="ajude-o-projeto">Ajude o projeto</h1>
<figure>
<img src="https://github.com/dunossauro/live-de-python/blob/main/stuff/qr%20codes/apoiase.png?raw=true" />
<figcaption>apoia.se/livedepython</figcaption>
</figure>
<figure>
<img src="https://github.com/dunossauro/live-de-python/blob/main/stuff/qr%20codes/pix.png?raw=true" />
<figcaption>pix.dunossauro@gmail.com</figcaption>
</figure>
<figure>
<img src="https://github.com/dunossauro/live-de-python/blob/main/stuff/qr%20codes/patreon.png?raw=true" />
<figcaption>patreon.com/dunossauro</figcaption>
</figure>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="4" data-class="apoia" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="apoia" style="--class:apoia;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<p>Albano Maywitz, Alexandre Costa, Alexandre Harano, Alexandre Lima, Alexandre Takahashi, Alexandre Villares, Alfredo Braga, Alfredo Neto, Alynnefs, Alysson Oliveira, Andre Makoski, André Oliveira, Andre Paula, Antonio Filho, Apc 16, Apolo Ferreira, Artur_farias_, Athayr_, Aurelio Costa, Azmovi, Belisa Arnhold, Beltzery, Bernardo Fontes, Bernarducs, Biancarosa, Brisa Nascimento, Bruno Batista, Bruno Bereoff, Bruno Freitas, Bruno Ramos, Bruno Russian, Bug_elseif, Canibasami, Caoptic, Carlos Gonçalves, Carlos Henrique, Cauã Oliveira, Celio Araujo, Christian Fischer, Claudemir Cruz, Cleiton Fonseca, Controlado, Curtos Treino, Daniel Aguiar, Daniel Brito, Daniel Bruno, Daniel Souza, Daniel Wojcickoski, Danilo Boas, Danilo Silva, Darcioalberico_sp, David Couto, Dh44s, Diego Guimarães, Dilan Nery, Dunossauro, Edgar, Elias Soares, Emerson Rafael, Érico Andrei, Esdras, Everton Silva, Ewertonbello, Fábio Belotto, Fabio Faria, Fabiokleis, Fecar995, Felipe Adeildo, Felipe Augusto, Felipe Corrêa, Fernanda Prado, Fernandocelmer, Ferrabras, Fichele Marias, Fightorfall, Francisco Aclima, Franklin Sousa, Frederico Damian, Fulvio Murenu, Gabriel Lira, Gabriel Mizuno, Gabriel Paiva, Gabriel Simonetto, Geilton Cruz, Geisler Dias, Giuliano Silva, Glauber Duma, Gnomo Nimp, Grinaode, Guibeira, Guilherme Felitti, Guilherme Ostrock, Gustavo Pedrosa, Gustavo Suto, Harold Gautschi, Heitor Fernandes, Hellyson Ferreira, Helton, Helvio Rezende, Henri Alves, Henrique Andrade, Henrique Machado, Henriquesebastiao, Herian Cavalcante, Hiago Couto, Idlelive, Ivan Santiago, Ivansantiagojr, Janael Pinheiro, Jean Victor, Jeferson Vitalino, Jefferson Antunes, Jerry Ubiratan, Jhonata Medeiros, Jhon Gonçalves, João Pena, Joao Rocha, Joarez Wernke, Jonas Araujo, Jonatas Leon, Jose Barroso, Joseíto Júnior, José Predo), Josir Gomes, Jota_lugs, Jplay, Jrborba, Ju14x, Juan Felipe, Juli4xpy, Juliana Machado, Julio Franco, Julio Gazeta, Julio Silva, Kaio Peixoto, Kakaroto, Knaka, Lara Nápoli, Leandro Pina, Leandro Vieira, Leonardo Mello, Leonardo Nazareth, Lilian Pires, Lisandro Pires, Lucas Carderelli, Lucas Castro, Lucasgcode, Lucas Mello, Lucas Mendes, Lucas Nascimento, Lucas Polo, Lucas Schneider, Luciano_ratamero, Luciano Ratamero, Lúcia Silva, Luidduarte, Luis Ottoni, Luiz Duarte, Luiz Martins, Luiz Paula, Luiz Perciliano, Marcelo Araujo, Marcelo Fonseca, Marcio Freitas, Marcos Almeida, Marcos Oliveira, Marina Passos, Mateusamorim96, Matheus Mendez, Matheus Vian, Medalutadorespacialx, Michael Santos, Mlevi Lsantos, Mrnoiman, Murilo Carvalho, Nhambu, Omatheusfc, Oopaze, Otávio Carneiro, Patrick Felipe, Pytonyc, Rafael Ferreira, Rafael Fontenelle, Rafael Lopes, Rafael Romão, Raimundo Ramos, Ramayana Menezes, Ramon Lobo, Renan, Renan Sebastião, Renato José, Rene Pessoto, Renne Rocha, Ricardo Silva, Ricardo Viana, Richard Sousa, Rinaldo Magalhaes, Robsonpiere, Rodrigo Barretos, Rodrigo Santana, Rodrigo Vieira, Rogeriocampos7, Rogério Nogueira, Rui Jr, Rwallan, Samael Picoli, Samanta Cicilia, Santhiago Cristiano, Scrimf00x, Scrimfx, Sherlock Holmes, Shinodinho, Shirakawa, Sommellier_sr, Tarcísio Miranda, Tenorio, Téo Calvo, Teomewhy, Tharles Andrade, Thiago, Thiago Araujo, Thiago Lucca, Thiago Paiva, Thisiscleverson, Tiago, Tomás Tamantini, Trojanxds, Valdir, Varlei Menconi, Vinicius Silva, Vinicius Souza, Vinicius Stein, Vittu_dt, Vladimir Lemos, Vonrroker, Waltennecarvalho, Williamslews, Willian Lopes, Xxxxxxxxx, Zero! Studio</p>
<h1 id="obrigado-voc%C3%AA-3">Obrigado você &lt;3</h1>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="5" data-class="s-yellow" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="s-yellow" style="--class:s-yellow;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h2 id="arquitetura-de-eventos">Arquitetura de eventos!</h2>
<h1 id="eda">EDA</h1>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="6" data-marpit-scope-chVRoFtU="" data-class="d-red" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="d-red" style="--class:d-red;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="arquitetura-dirigida-por-eventos">Arquitetura dirigida por eventos</h1>
<h3 id="a-arquitetura-dirigida-por-eventos-%C3%A9-um-estilo-de-arquitetura-distribu%C3%ADda-ass%C3%ADncrona-popularmente-usada-para-produzir-aplica%C3%A7%C3%B5es-altamente-escal%C3%A1veis-e-de-alto-desempenho-tamb%C3%A9m-%C3%A9-altamente-adapt%C3%A1vel-e-pode-ser-usada-tanto-para-aplica%C3%A7%C3%B5es-pequenas-quanto-para-as-grandes-e-complexas">&quot;(...) A arquitetura dirigida por <strong>eventos</strong> é um estilo de arquitetura <strong>distribuída</strong> <strong>assíncrona</strong> popularmente usada para produzir aplicações altamente <strong>escaláveis</strong> e de <strong>alto desempenho</strong>. Também é altamente adaptável e pode ser usada tanto para aplicações pequenas quanto para as grandes e complexas.&quot;</h3>
<blockquote>
<p>RICHARDS, Mark; FORD, Neal. Fundamentals of software architecture</p>
</blockquote>
<p><em>Very jargonic...</em></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="7" data-marpit-scope-xQHerM7y="" data-class="d-red" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="d-red" style="--class:d-red;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="arquitetura-dirigida-por-eventos-1">Arquitetura dirigida por eventos</h1>
<h3 id="a-arquitetura-dirigida-por-eventos-%C3%A9-um-estilo-de-arquitetura-distribu%C3%ADda-ass%C3%ADncrona-popularmente-usada-para-produzir-aplica%C3%A7%C3%B5es-altamente-escal%C3%A1veis-e-de-alto-desempenho-tamb%C3%A9m-%C3%A9-altamente-adapt%C3%A1vel-e-pode-ser-usada-tanto-para-aplica%C3%A7%C3%B5es-pequenas-quanto-para-as-grandes-e-complexas-1">&quot;(...) A arquitetura dirigida por <strong>eventos</strong> é um estilo de arquitetura <strong>distribuída</strong> <strong>assíncrona</strong> popularmente usada para produzir aplicações altamente <strong>escaláveis</strong> e de <strong>alto desempenho</strong>. Também é altamente adaptável e pode ser usada tanto para aplicações pequenas quanto para as grandes e complexas.&quot;</h3>
<blockquote>
<p>RICHARDS, Mark; FORD, Neal. Fundamentals of software architecture</p>
</blockquote>
<p><em>Very jargonic...</em> É...</p>
<ul>
<li><strong>Eventos</strong></li>
<li><strong>Distribuída</strong></li>
<li><strong>Assíncrona</strong></li>
<li><strong>Escalável</strong></li>
<li><strong>Alto desempenho</strong></li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="8" data-marpit-scope-V0SmNCpN="" data-class="d-yellow" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="d-yellow" style="--class:d-yellow;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="vamos-termo-a-termo">Vamos termo a termo...</h1>
<ul>
<li><strong>Distribuída</strong>: Arquitetura onde os componentes estão espalhados por múltiplos servidores ou locais, colaborando para realizar tarefas.</li>
<li><strong>Assíncrona</strong>: Comunicação onde o remetente não espera uma resposta imediata, permitindo que o sistema continue processando outras tarefas.</li>
<li><strong>Escalável</strong>: Capacidade do sistema de aumentar sua capacidade de processamento adicionando mais recursos conforme a demanda cresce.</li>
<li><strong>Alto desempenho</strong>: Resposta rápida e eficiente do sistema, mesmo sob cargas elevadas, garantindo que as operações sejam realizadas em tempo adequado.</li>
<li><strong>Eventos</strong>: Ocorrências ou mudanças no sistema que são detectadas e tratadas, permitindo que componentes se comuniquem por mensagens.</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="9" data-class="d-red" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="d-red" style="--class:d-red;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="vamos-dar-um-passo-atr%C3%A1s">Vamos dar um passo atrás...</h1>
<p>Na arquitetura tradicional, APIs se comunicam entre si via <strong>requisições HTTP</strong>, onde uma atua como <strong>cliente</strong> e outra como <strong>servidor</strong>.</p>
<p>Esse modelo é <strong>sincrônico</strong>: quem faz a requisição precisa <strong>esperar a resposta</strong> para continuar.</p>
<div class="mermaid">
sequenceDiagram
    participant Cliente
    participant API_A as API A (Cliente)
    participant API_B as API B (Servidor)
    Cliente-&gt;&gt;API_A: HTTP Request (POST /pedido)
    API_A-&gt;&gt;API_B: HTTP Request (GET /estoque)
    API_B--&gt;&gt;API_A: HTTP Response (200 OK)
    API_A--&gt;&gt;Cliente: HTTP Response (201 Created)
</div>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="10" data-class="d-yellow" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="d-yellow" style="--class:d-yellow;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="agora-com-eventos">Agora, com eventos...</h1>
<p>Na arquitetura dirigida por eventos, os serviços não ficam esperando respostas. Eles <strong>disparam eventos</strong> em um canal de mensagens e <strong>seguem em frente</strong>.</p>
<p>Quem estiver interessado nesses eventos pode reagir a eles, de forma <strong>independente</strong>.</p>
<div class="mermaid">
flowchart LR
  subgraph subGraph0["Outro sistema"]
    A["Broker"]:::broker
  end
  subgraph subGraph1["Outros sistemas"]
    S0["Ouvinte 1"]:::listener
    S1["Ouvinte 2"]:::listener
    S2["Ouvinte 3"]:::listener
  end
  C0["Cliente"] --&gt; P0["API / Publicador"]
  P0 --&gt; C0
  P0 -- evento --&gt; A
  A --&gt;|tópico A| S0
  A --&gt;|tópico B| S1
  A --&gt;|tópico C| S2
  A@{ shape: das}
  classDef broker fill:#f9f,stroke:#333,stroke-width:2px;
  classDef listener fill:#9cf,stroke:#333,stroke-width:1.5px;
</div>
<p>O grande ponto aqui é que <strong>quem publica</strong> o <strong>evento</strong> <strong>não conhece quem ouve</strong> o evento. <strong>Desacoplando</strong> de forma <strong>distribuída</strong> o processamento.</p>
<p>Não é necessário <strong>conhecer</strong> a API chamada, como no modelo passado.</p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="11" data-class="d-red" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="d-red" style="--class:d-red;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="um-exemplo-%C3%A0s-vezes-diz-mais-que-tudo">Um exemplo às vezes diz mais que tudo...</h1>
<p>Imagine um sistema de compras online.</p>
<p>Quando clicamos em &quot;comprar&quot;, diversas coisas acontecem por trás disso. Por exemplo:</p>
<ol>
<li>Precisamos ser checar no estoque se existe</li>
<li>Validar o pagamento</li>
<li>Emitir nota fiscal</li>
<li>Delegar à logística</li>
<li>...</li>
</ol>
<p>Imagina ter que esperar por tudo isso pra &quot;confirmar&quot; que você comprou.</p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="12" data-class="d-yellow" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="d-yellow" style="--class:d-yellow;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="distribu%C3%ADdo-e-ass%C3%ADncrono">Distribuído e Assíncrono</h1>
<p>Então, a ideia por trás é delegar tarefas para outros subsistemas de forma assíncrona.</p>
<p>O sistema principal emite <strong>eventos</strong></p>
<div class="mermaid">
flowchart RL
	A["Broker"]:::broker
	subgraph subGraph1["Ouvintes / Subscribers"]
		S0["Compras"]:::listener
		S1["Estoque"]:::listener
		S2["Pagamento"]:::listener
		S3["Notas"]:::listener
	end
	P0 --&gt; DB
	S0 ---&gt; DB
	S1 ---&gt; DB
	S2 ---&gt; DB
	S3 ---&gt; DB
	P0["Publicador"] -- Compra --&gt; A
	A --&gt;|Compra| S0
	S0 -- Estoque,<br />Pagamento --&gt; A
	A --&gt;|Estoque| S1
	A --&gt;|Pagamento| S2
	S2 --&gt;|Nota| A
	A --&gt;|Nota| S3
	A@{ shape: das}
	DB@{ shape: cyl}
	classDef broker fill:#f9f,stroke:#333,stroke-width:2px;
	classDef listener fill:#9cf,stroke:#333,stroke-width:1.5px;
</div>
<p>Onde os sistemas de forma distribuída emitem mensagens sem esperar a resposta do outro.</p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="13" data-class="c-red" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="c-red" style="--class:c-red;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<p>Um exemplo é sempre bom, às vezes diz mais que tudo...</p>
<h1 id="vamos-l%C3%A1">Vamos lá</h1>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="14" data-class="d-yellow" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="d-yellow" style="--class:d-yellow;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="e-se-algo-der-errado">E se algo der errado?</h1>
<p>Com eventos, é possível lidar com erros sem travar o fluxo principal.</p>
<p>Por exemplo: se um ouvinte falhar ao processar um evento, os demais ainda continuam funcionando normalmente.</p>
<div class="mermaid">
flowchart LR
	subgraph Sistema
		A["Broker"]:::broker
		P0["API / Publicador"]
		S1["Ouvinte A"]:::listener
		S2["Ouvinte B (falha) ❌"]:::error
		S3["Ouvinte C"]:::listener
	end
	C0["Cliente"] --&gt; P0
	P0 -- evento --&gt; A
	A --&gt; S1
	A --&gt; S2
	A --&gt; S3
	A@{ shape: das}
	classDef broker fill:#f9f,stroke:#333,stroke-width:2px;
	classDef listener fill:#9cf,stroke:#333,stroke-width:1.5px;
	classDef error fill:#faa,stroke:#900,stroke-width:2px;
</div>
<p>Mesmo que uma parte do sistema falhe, o restante continua processando eventos normalmente.</p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="15" data-class="d-red" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="d-red" style="--class:d-red;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="retry">Retry</h1>
<p>Como os eventos são desacoplados, o erro, apesar de não gerar impacto em toda a cadeira, algumas coisas precisam acontecer.</p>
<p>Uma das estratégias é tentar de novo. Um <code>retry</code>. O que não impacta nenhum outro &quot;ouvinte&quot;.</p>
<div class="mermaid">
flowchart LR
	A[Broker]:::broker@{ shape: das}
	A -- 1. Consome a mensagem --&gt; B[Serviço de Processamento]
	B -- 2. Falha de processamento --&gt; C{Tentativa?}
	C -- Sim, tentativa 1 --&gt; B
	B -- 3. Falha de novo --&gt; C
	C -- Sim, tentativa 2 --&gt; B
	B -- 4. Sucesso! --&gt; D[Processado]
	B -- 4. Falha de novo<br />e limite atingido --&gt; E[Erro fatal]
	classDef broker fill:#f9f,stroke:#333,stroke-width:2px;
</div>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="16" data-class="d-yellow" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="d-yellow" style="--class:d-yellow;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="dead-letter-queue-dlq">Dead Letter Queue (DLQ)</h1>
<p>A ideia da DLQ é &quot;guardar&quot; os eventos que falharam após o limite de <code>retry</code> ser atingido.</p>
<p>Esses eventos &quot;envenenados&quot; são movidos para uma fila separada, evitando que eles congestionem a fila principal. A <strong>DLQ</strong> serve como um local para a equipe de desenvolvimento inspecionar, diagnosticar e, se necessário, reprocessar as mensagens problemáticas.</p>
<div class="mermaid">
flowchart LR
    subgraph Fila Principal
        direction LR
        A[Mensagem 1] --&gt; B[Mensagem 2] --&gt; C[Mensagem 3]
    end
    subgraph Processamento
        P[Processador]
    end
    Fila_Principal --&gt; P
    P -- Falha definitiva --&gt; DLQ[Dead Letter Queue<br />❌]
    classDef broker fill:#f9f,stroke:#333,stroke-width:2px;
    classDef listener fill:#9cf,stroke:#333,stroke-width:1.5px;
    classDef error fill:#faa,stroke:#900,stroke-width:2px;
</div>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="17" data-marpit-scope-UOQqsmSY="" data-class="d-red" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="d-red" style="--class:d-red;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="asyncapi">AsyncAPI</h1>
<p>Bom... por fim, é interessante saber que existe uma forma de documentar seus eventos. Assim como o <code>redoc</code> ou <code>swagger</code> para APIs baseadas em eventos.</p>
<p>O <a href="https://www.asyncapi.com/en"><code>AsyncAPI</code></a>:</p>
<p><img src="print_async_00.png" alt="" /></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="18" data-class="s-yellow" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="s-yellow" style="--class:s-yellow;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h2 id="uma-introdu%C3%A7%C3%A3o-ao">Uma introdução ao</h2>
<h1 id="fastbrstream">Fast<br />Stream</h1>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="19" data-marpit-scope-4r3RuxBi="" data-class="d-red" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="d-red" style="--class:d-red;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="faststream">FastStream</h1>
<p>Uma biblioteca para lidar com sistemas de mensageria em Python. Com suporte a diversos brokers e com a simplicidade inspirada no FastAPI. Suporte à programação assíncrona (asyncio) e serialização via pydantic.</p>
<div class=lados>
<span>
<ul>
<li>Licença: Apache 2.0</li>
<li>Primeira release: Novembro de 2023</li>
<li>Release atual: <code>0.5.48</code> -- 21/12/2025</li>
<li>0.6 em release candidate 2 (14/08/2025)</li>
<li>Downloads nesse mês: <code>409.540</code></li>
<li>Suporta integrações com <a href="https://faststream.ag2.ai/latest/getting-started/integrations/frameworks/">frameworks web</a> e com OTel</li>
</ul>
</span>
<div>
<p><img src="https://faststream.ag2.ai/latest/assets/img/logo.svg" alt="" /></p>
</div>
</div>
<p>É a junção de duas bibliotecas que apresentavam comportamentos similares:</p>
<ul>
<li><code>FastKafka</code>: Pydantic + <code>AIOKafka</code> + AsyncAPI</li>
<li><code>Propan</code>: Pydantic + <code>AIOPika</code> + AsyncAPI</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="20" data-class="d-yellow" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="d-yellow" style="--class:d-yellow;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="suporte-a-brokers">Suporte a brokers</h1>
<p>Um dos grandes trunfos do <code>FastStream</code> é suportar diversos sistemas de mensageria.</p>
<ul>
<li><strong>Kafka</strong></li>
<li><strong>Redis</strong>: Vamos usar esse, o @taconi esolheu na twitch xD</li>
<li><strong>Nats</strong></li>
<li><strong>Rabbit</strong></li>
<li><strong>Confluent</strong></li>
</ul>
<p>Vamos subir o container:</p>
<pre><code class="language-bash">podman run -p 6379:6379 docker.io/redis
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="21" data-class="d-yellow" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="d-yellow" style="--class:d-yellow;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="instala%C3%A7%C3%A3o">Instalação</h1>
<p>Para a instalação inicial, podemos usar:</p>
<pre><code class="language-bash">pip install faststream
</code></pre>
<p>Mas eu recomendo essa instalação inicial:</p>
<pre><code class="language-bash">pip install faststream[redis,cli]
</code></pre>
<ul>
<li>Todo broker precisa ser instalado individualmente
<ul>
<li>redis, kafka, rabbit, nats, confluent</li>
</ul>
</li>
<li>O CLI vai nos permitir executar o faststream pelo terminal</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="22" data-class="d-red" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="d-red" style="--class:d-red;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="exemplo-b%C3%A1sico">Exemplo básico</h1>
<p>Podemos começar com algo assim:</p>
<pre><code class="language-python"><span class="hljs-keyword">from</span> faststream <span class="hljs-keyword">import</span> FastStream
<span class="hljs-keyword">from</span> faststream.redis <span class="hljs-keyword">import</span> RedisBroker

broker = RedisBroker(<span class="hljs-string">&#x27;redis://localhost:6379&#x27;</span>)
app = FastStream(broker)


<span class="hljs-meta">@broker.subscriber(<span class="hljs-params"><span class="hljs-string">&#x27;test&#x27;</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">handler</span>(<span class="hljs-params">message</span>):
    <span class="hljs-keyword">return</span> message
</code></pre>
<p>Para executar o sub no CLI:</p>
<pre><code class="language-bash">faststream run serve exemplo_00:app --workers 4 <span class="hljs-comment"># se escalar, dá :)</span>
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="23" data-class="nb-yellow" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="nb-yellow" style="--class:nb-yellow;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="publicando-uma-mensagen-na-fila">Publicando uma mensagen na fila</h1>
<p>Você pode usar uma ferramenta gráfica para Redis, como o <a href="https://redis.tinycraft.cc/">Tiny RDM</a>.</p>
<p>Ou a biblioteca do redis em um serviço qualquer em qualquer linguagem:</p>
<pre><code class="language-python"><span class="hljs-keyword">from</span> redis <span class="hljs-keyword">import</span> Redis

r = Redis()

r.publish(<span class="hljs-string">&#x27;test&#x27;</span>, <span class="hljs-string">&#x27;mensagem maluca!&#x27;</span>)
</code></pre>
<div class="mermaid">
flowchart TD
	P0[Pub] --&gt;|mensagem| A[Broker]@{ shape: das }
	P1[Pub] --&gt;|mensagem| A
	P2[Pub] --&gt;|mensagem| A
</div>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="24" data-class="d-red" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="d-red" style="--class:d-red;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="escutando-e-executando">Escutando e executando</h1>
<p>Os subscribers esperam mensagens em tópicos específicos da fila de mensagens.</p>
<div class="mermaid">
flowchart TD
	P0[Pub] --&gt;|mensagem + T| A[Broker]@{ shape: das }
	A --&gt;|:test:|S0[SUB]
	A --&gt;|:compras:|S1[SUB ]
	A --&gt;|:pagamentos:|S3[SUB]
	A --&gt;|:xpto:|S4[SUB]
</div>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="25" data-class="d-yellow" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="d-yellow" style="--class:d-yellow;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="olhando-o-cli">Olhando o CLI</h1>
<p>Algo como isso deve ser exibido:</p>
<pre><code class="language-bash">- <span class="hljs-built_in">test</span> | 9b9ecc3d-a - Received
- <span class="hljs-built_in">test</span> | 9b9ecc3d-a - Processed
</code></pre>
<p>Mostrando que a mensagem foi recebida no tópico de test e, em seguida, foi processada.</p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="26" data-class="d-red" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="d-red" style="--class:d-red;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="testando-o-evento">Testando o evento</h1>
<p>A forma de testar de forma unitária o evento é chamando a função diretamente:</p>
<pre><code class="language-python"><span class="hljs-keyword">import</span> pytest  <span class="hljs-comment"># pip install pytest-asyncio</span>
<span class="hljs-keyword">from</span> faststream.redis <span class="hljs-keyword">import</span> TestRedisBroker


<span class="hljs-meta">@pytest.mark.asyncio</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_handler</span>():
    <span class="hljs-keyword">assert</span> <span class="hljs-keyword">await</span> handler(<span class="hljs-string">&#x27;teste&#x27;</span>) == <span class="hljs-string">&#x27;teste&#x27;</span>


<span class="hljs-meta">@pytest.mark.asyncio</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_handler_integration</span>():
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> TestRedisBroker(broker) <span class="hljs-keyword">as</span> br:
        response = <span class="hljs-keyword">await</span> br.request(<span class="hljs-string">&#x27;teste&#x27;</span>, channel=<span class="hljs-string">&#x27;test&#x27;</span>)
        <span class="hljs-keyword">assert</span> response.body.decode() == <span class="hljs-string">&#x27;teste&#x27;</span>
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="27" data-class="d-yellow" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="d-yellow" style="--class:d-yellow;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="pydantic">Pydantic</h1>
<p>A ideia por trás do uso do pydantic é poder validar e serializar as entradas. Fazendo com que seja mais simples trabalhar com os eventos.</p>
<pre><code class="language-python"><span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Event</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    <span class="hljs-built_in">id</span>: <span class="hljs-built_in">int</span> | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>
    message: <span class="hljs-built_in">str</span>


<span class="hljs-meta">@broker.subscriber(<span class="hljs-params"><span class="hljs-string">&#x27;test&#x27;</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">handler</span>(<span class="hljs-params">trace_id: <span class="hljs-built_in">int</span>, modelo_do_evento: Event</span>):
    <span class="hljs-keyword">return</span> trace_id, modelo_do_evento
</code></pre>
<p>Ele vai validar tanto os campos como <code>trace_id</code>, quanto o modelo <code>Event</code>.</p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="28" data-marpit-scope-J6moY6fI="" data-class="d-red" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="d-red" style="--class:d-red;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="asyncapi-1">AsyncAPI</h1>
<p>Quando usamos o pydantic, da mesma forma que o FastAPI faz, ele cria uma visualização da <code>AsyncAPI</code>. Documentando o formato e os tipos dos eventos:</p>
<pre><code class="language-bash">faststream docs serve exemplos.exemplo_01:app
</code></pre>
<p><img src="print_async.png" alt="" /></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="29" data-class="d-yellow" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="d-yellow" style="--class:d-yellow;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="inje%C3%A7%C3%A3o-de-depend%C3%AAncia">Injeção de dependência</h1>
<p>Por padrão, o <code>FastStream</code> instala o <code>FastDepends</code> (dos mesmos criadores), fazendo com que injetar outras funções seja bastante simples:</p>
<pre><code class="language-python"><span class="hljs-keyword">from</span> fast_depends <span class="hljs-keyword">import</span> Depends

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_session</span>():
    <span class="hljs-keyword">yield</span> ...

<span class="hljs-meta">@broker.subscriber(<span class="hljs-params"><span class="hljs-string">&#x27;test&#x27;</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">handler</span>(<span class="hljs-params">
    modelo_do_evento: Event,
    session = Depends(<span class="hljs-params">get_session</span>)
</span>):
    ...
    <span class="hljs-keyword">return</span> modelo_do_evento
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="30" data-class="d-red" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="d-red" style="--class:d-red;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="pubsub">Pub/Sub</h1>
<p>Por já contar com o broker instanciado, você pode encadear as chamadas, fazendo um resultado ser públicado em outro tópico:</p>
<pre><code class="language-python"><span class="hljs-meta">@broker.subscriber(<span class="hljs-params"><span class="hljs-string">&#x27;topico_a&#x27;</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">handler_a</span>(<span class="hljs-params">modelo_do_evento: Event</span>):
    <span class="hljs-comment"># Chamada</span>
    <span class="hljs-keyword">await</span> broker.publish(modelo_do_evento, <span class="hljs-string">&#x27;topico_b&#x27;</span>)

<span class="hljs-meta">@broker.subscriber(<span class="hljs-params"><span class="hljs-string">&#x27;topico_b&#x27;</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">handler_b</span>(<span class="hljs-params">modelo_do_evento: Event</span>):
    <span class="hljs-keyword">return</span> modelo_do_evento
</code></pre>
<p>Isso vai fazer um evento de um <code>sub</code> publicar para outro.</p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="31" data-class="d-yellow" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="d-yellow" style="--class:d-yellow;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="decoradores--pipe">Decoradores / pipe</h1>
<p>Uma forma bastante interessante de fazer isso no <code>FastStream</code> é a capacidade de o retorno de uma função ser retornado ao broker em outro tópico:</p>
<pre><code class="language-python"><span class="hljs-meta">@broker.subscriber(<span class="hljs-params"><span class="hljs-string">&#x27;topico_a&#x27;</span></span>)</span>
<span class="hljs-meta">@broker.publisher(<span class="hljs-params"><span class="hljs-string">&#x27;topico_b&#x27;</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">handler_a</span>(<span class="hljs-params">modelo_do_evento: Event</span>):
    <span class="hljs-keyword">return</span> modelo_do_evento

<span class="hljs-meta">@broker.subscriber(<span class="hljs-params"><span class="hljs-string">&#x27;topico_b&#x27;</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">handler_b</span>(<span class="hljs-params">modelo_do_evento: Event</span>):
    <span class="hljs-keyword">return</span> modelo_do_evento
</code></pre>
<p>Nesse sentido, de aninhamento de decoradores, uma função pode ser <code>sub</code> de quantos tópicos quiser e <code>sub</code> também. Podendo gerar um fluxo de mensagens complexo.</p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="32" data-class="s-red" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="s-red" style="--class:s-red;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="erros">Erros</h1>
<h2 id="lidando-com-eles">Lidando com eles</h2>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="33" data-class="d-yellow" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="d-yellow" style="--class:d-yellow;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="lidando-com-erros">Lidando com erros!</h1>
<p>Essa é uma parte bastante diferente do <code>FastStream</code>. Em comparação com outras ferramentas, como celery, dramatiq e etc...</p>
<p>Ele não lida com erros de forma nativa. Mas sugere uma biblioteca competente que se integra muito bem ao fluxo das funções. O <a href="https://tenacity.readthedocs.io/en/latest/">Tenacity</a>.</p>
<p>Que oferece:</p>
<ul>
<li>Retries</li>
<li>Backoff</li>
<li>Callbacks</li>
<li>...</li>
</ul>
<pre><code class="language-bash">pip install tenacity
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="34" data-class="d-red" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="d-red" style="--class:d-red;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="em-caso-de-erro-fa%C3%A7a-de-novo">Em caso de erro, faça de novo...</h1>
<p>Um exemplo não tão simples... mas completo</p>
<pre><code class="language-python"><span class="hljs-keyword">from</span> tenacity <span class="hljs-keyword">import</span> retry, stop_after_attempt, wait_random_exponential

<span class="hljs-meta">@broker.publisher(<span class="hljs-params"><span class="hljs-string">&#x27;estoque&#x27;</span></span>)</span>
<span class="hljs-meta">@retry(<span class="hljs-params">
    <span class="hljs-comment"># Tente novamente 5 vezes</span>
    stop=stop_after_attempt(<span class="hljs-params"><span class="hljs-number">5</span></span>),
    <span class="hljs-comment"># Espere de forma exponencial entre as tentativas</span>
    wait=wait_random_exponential(<span class="hljs-params">multiplier=<span class="hljs-number">1</span>, <span class="hljs-built_in">max</span>=<span class="hljs-number">60</span></span>),
    <span class="hljs-comment"># Caso as cinco tentativas deem errado, chame um callback</span>
    retry_error_callback=on_final_failure
    <span class="hljs-comment"># A função `on_final_failure` é responsável pelo DLQ, por exemplo...</span>
</span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">checkout</span>(<span class="hljs-params">produto: Produto, logger: Logger</span>) -&gt; <span class="hljs-built_in">int</span>: ...
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="35" data-class="d-yellow" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="d-yellow" style="--class:d-yellow;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="se-n%C3%A3o-der">Se não der...</h1>
<p>A gente bota pra DLQ.</p>
<blockquote>
<p>Nesse caso em específico, o redis não suporta DQL nativamente como o <code>rabbitmq</code> ou <code>kafka</code>.</p>
</blockquote>
<pre><code class="language-python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">on_final_failure</span>(<span class="hljs-params">retry_state</span>):
    redis = broker._connection

    data = retry_state.kwargs.copy()
    message = json.dumps({retry_state.fn.__name__: data})

    <span class="hljs-keyword">await</span> redis.lpush(<span class="hljs-string">&#x27;DLQ&#x27;</span>, message)
</code></pre>
<p><code>lpush</code> insere a mensagem em uma lista, que pode ser consumida depois...</p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="36" data-class="s-red" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="s-red" style="--class:s-red;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="agendabrmento">Agenda<br />mento</h1>
<h2 id="de-tarefas">De tarefas</h2>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="37" data-class="d-yellow" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="d-yellow" style="--class:d-yellow;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="agendamento">Agendamento</h1>
<p>A ideia do agendamento é fazer a publicação de uma mensagem de tempos em tempos, por exemplo.</p>
<p>A vida é cheia de eventos periódicos:</p>
<ul>
<li>Fechamento diário de caixa</li>
<li>Balanço mensal</li>
<li>Consultar a DLQ</li>
<li>Efetuar pagamentos</li>
<li>Compras</li>
<li>...</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="38" data-marpit-scope-eglYITgV="" data-class="d-red" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="d-red" style="--class:d-red;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="agendamento-1">Agendamento</h1>
<p>Esse é um outro tópico do qual o <code>FastStream</code> não toma conta sozinho. Como diz a <a href="https://faststream.ag2.ai/latest/scheduling/">documentação</a>:</p>
<h3 id="infelizmente-essa-funcionalidade-conflita-com-a-ideologia-original-do-faststream-e-n%C3%A3o-pode-ser-implementada-como-parte-do-framework-no-entanto-%C3%A9-poss%C3%ADvel-integrar-o-agendamento-ao-seu-aplicativo-faststream-usando-algumas-depend%C3%AAncias-extras-e-n%C3%B3s-temos-algumas-dicas-de-como-fazer-isso">&quot;Infelizmente, essa funcionalidade conflita com a ideologia original do FastStream e não pode ser implementada como parte do framework. No entanto, é possível integrar o agendamento ao seu aplicativo FastStream usando algumas dependências extras. E nós temos algumas dicas de como fazer isso.&quot;</h3>
<br />
<p>Existem algumas recomendações de ferramentas como <code>Taskiq</code> e o <code>Rocketry</code>. Como a grande recomendação é o <code>Taskiq</code>, por criarem um plugin para ele:</p>
<pre><code class="language-bash">pip install taskiq-faststream
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="39" data-class="d-yellow" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="d-yellow" style="--class:d-yellow;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="taskiq">Taskiq</h1>
<p>Montando algo como:</p>
<pre><code class="language-python">broker = RedisBroker()
app = FastStream(broker)
<span class="hljs-comment"># Taskiq</span>
taskiq_broker = BrokerWrapper(broker)

taskiq_broker.task(
    channel=<span class="hljs-string">&#x27;periodic&#x27;</span>,                  <span class="hljs-comment"># Tópico</span>
    message=<span class="hljs-string">&#x27;&#x27;</span>,                          <span class="hljs-comment"># Conteúdo</span>
    schedule=[{<span class="hljs-string">&#x27;cron&#x27;</span>: <span class="hljs-string">&#x27;*/5 * * * *&#x27;</span>}],  <span class="hljs-comment"># A cada 5 minutos</span>
)

scheduler = StreamScheduler(
    broker=taskiq_broker,
    sources=[LabelScheduleSource(taskiq_broker)],
)
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="40" data-class="d-red" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="d-red" style="--class:d-red;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="taskiq-1">Taskiq</h1>
<p>A chamada também deve ser alterada. Fazendo com que a chamada de CLI seja a do Taskiq:</p>
<pre><code class="language-bash">taskiq scheduler module:scheduler
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="41" data-class="help" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="help" style="--class:help;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="ajude-o-projeto-1">Ajude o projeto</h1>
<figure>
<img src="https://github.com/dunossauro/live-de-python/blob/main/stuff/qr%20codes/apoiase.png?raw=true" />
<figcaption>apoia.se/livedepython</figcaption>
</figure>
<figure>
<img src="https://github.com/dunossauro/live-de-python/blob/main/stuff/qr%20codes/pix.png?raw=true" />
<figcaption>pix.dunossauro@gmail.com</figcaption>
</figure>
<figure>
<img src="https://github.com/dunossauro/live-de-python/blob/main/stuff/qr%20codes/patreon.png?raw=true" />
<figcaption>patreon.com/dunossauro</figcaption>
</figure>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 960 720"><foreignObject width="960" height="720"><section id="42" data-class="red" data-theme="xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94" lang="en-US" class="red" style="--class:red;--theme:xipxon9jrtl39hhrvylgi1j7fg656hx6cgckpxu4h94;">
<h1 id="refer%C3%AAncias">Referências</h1>
<ul>
<li>AG2AI. FastStream - FastStream. Disponível em: <a href="https://faststream.ag2.ai/latest/">https://faststream.ag2.ai/latest/</a>. Acesso em: 21 ago. 2025.</li>
<li>RICHARDS, Mark; FORD, Neal. Fundamentals of software architecture: an engineering approach. First edition ed. Sebastopol, CA: O’Reilly Media, Inc, 2020.</li>
<li>Tenacity — Tenacity documentation. Disponível em: <a href="https://tenacity.readthedocs.io/en/latest/#">https://tenacity.readthedocs.io/en/latest/#</a>. Acesso em: 25 ago. 2025.</li>
</ul>
<script type="module">
import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
mermaid.initialize({
startOnLoad: true,
theme: 'forest'
});
</script>
</section>
<script>!function(){"use strict";const t={h1:{proto:()=>HTMLHeadingElement,attrs:{role:"heading","aria-level":"1"},style:"display: block; font-size: 2em; margin-block-start: 0.67em; margin-block-end: 0.67em; margin-inline-start: 0px; margin-inline-end: 0px; font-weight: bold;"},h2:{proto:()=>HTMLHeadingElement,attrs:{role:"heading","aria-level":"2"},style:"display: block; font-size: 1.5em; margin-block-start: 0.83em; margin-block-end: 0.83em; margin-inline-start: 0px; margin-inline-end: 0px; font-weight: bold;"},h3:{proto:()=>HTMLHeadingElement,attrs:{role:"heading","aria-level":"3"},style:"display: block; font-size: 1.17em; margin-block-start: 1em; margin-block-end: 1em; margin-inline-start: 0px; margin-inline-end: 0px; font-weight: bold;"},h4:{proto:()=>HTMLHeadingElement,attrs:{role:"heading","aria-level":"4"},style:"display: block; margin-block-start: 1.33em; margin-block-end: 1.33em; margin-inline-start: 0px; margin-inline-end: 0px; font-weight: bold;"},h5:{proto:()=>HTMLHeadingElement,attrs:{role:"heading","aria-level":"5"},style:"display: block; font-size: 0.83em; margin-block-start: 1.67em; margin-block-end: 1.67em; margin-inline-start: 0px; margin-inline-end: 0px; font-weight: bold;"},h6:{proto:()=>HTMLHeadingElement,attrs:{role:"heading","aria-level":"6"},style:"display: block; font-size: 0.67em; margin-block-start: 2.33em; margin-block-end: 2.33em; margin-inline-start: 0px; margin-inline-end: 0px; font-weight: bold;"},span:{proto:()=>HTMLSpanElement},pre:{proto:()=>HTMLElement,style:"display: block; font-family: monospace; white-space: pre; margin: 1em 0; --marp-auto-scaling-white-space: pre;"}},e="data-marp-auto-scaling-wrapper",i="data-marp-auto-scaling-svg",n="data-marp-auto-scaling-container";class s extends HTMLElement{container;containerSize;containerObserver;svg;svgComputedStyle;svgPreserveAspectRatio="xMinYMid meet";wrapper;wrapperSize;wrapperObserver;constructor(){super();const t=t=>([e])=>{const{width:i,height:n}=e.contentRect;this[t]={width:i,height:n},this.updateSVGRect()};this.attachShadow({mode:"open"}),this.containerObserver=new ResizeObserver(t("containerSize")),this.wrapperObserver=new ResizeObserver(((...e)=>{t("wrapperSize")(...e),this.flushSvgDisplay()}))}static get observedAttributes(){return["data-downscale-only"]}connectedCallback(){this.shadowRoot.innerHTML=`\n<style>\n  svg[${i}] { display: block; width: 100%; height: auto; vertical-align: top; }\n  span[${n}] { display: table; white-space: var(--marp-auto-scaling-white-space, nowrap); width: max-content; }\n</style>\n<div ${e}>\n  <svg part="svg" ${i}>\n    <foreignObject><span ${n}><slot></slot></span></foreignObject>\n  </svg>\n</div>\n    `.split(/\n\s*/).join(""),this.wrapper=this.shadowRoot.querySelector(`div[${e}]`)??void 0;const t=this.svg;this.svg=this.wrapper?.querySelector(`svg[${i}]`)??void 0,this.svg!==t&&(this.svgComputedStyle=this.svg?window.getComputedStyle(this.svg):void 0),this.container=this.svg?.querySelector(`span[${n}]`)??void 0,this.observe()}disconnectedCallback(){this.svg=void 0,this.svgComputedStyle=void 0,this.wrapper=void 0,this.container=void 0,this.observe()}attributeChangedCallback(){this.observe()}flushSvgDisplay(){const{svg:t}=this;t&&(t.style.display="inline",requestAnimationFrame((()=>{t.style.display=""})))}observe(){this.containerObserver.disconnect(),this.wrapperObserver.disconnect(),this.wrapper&&this.wrapperObserver.observe(this.wrapper),this.container&&this.containerObserver.observe(this.container),this.svgComputedStyle&&this.observeSVGStyle(this.svgComputedStyle)}observeSVGStyle(t){const e=()=>{const i=(()=>{const e=t.getPropertyValue("--preserve-aspect-ratio");if(e)return e.trim();return`x${(({textAlign:t,direction:e})=>{if(t.endsWith("left"))return"Min";if(t.endsWith("right"))return"Max";if("start"===t||"end"===t){let i="rtl"===e;return"end"===t&&(i=!i),i?"Max":"Min"}return"Mid"})(t)}YMid meet`})();i!==this.svgPreserveAspectRatio&&(this.svgPreserveAspectRatio=i,this.updateSVGRect()),t===this.svgComputedStyle&&requestAnimationFrame(e)};e()}updateSVGRect(){let t=Math.ceil(this.containerSize?.width??0);const e=Math.ceil(this.containerSize?.height??0);void 0!==this.dataset.downscaleOnly&&(t=Math.max(t,this.wrapperSize?.width??0));const i=this.svg?.querySelector(":scope > foreignObject");if(i?.setAttribute("width",`${t}`),i?.setAttribute("height",`${e}`),this.svg&&(this.svg.setAttribute("viewBox",`0 0 ${t} ${e}`),this.svg.setAttribute("preserveAspectRatio",this.svgPreserveAspectRatio),this.svg.style.height=t<=0||e<=0?"0":""),this.container){const t=this.svgPreserveAspectRatio.toLowerCase();this.container.style.marginLeft=t.startsWith("xmid")||t.startsWith("xmax")?"auto":"0",this.container.style.marginRight=t.startsWith("xmi")?"auto":"0"}}}const r=(t,{attrs:e={},style:i})=>class extends t{constructor(...t){super(...t);for(const[t,i]of Object.entries(e))this.hasAttribute(t)||this.setAttribute(t,i);this._shadow()}static get observedAttributes(){return["data-auto-scaling"]}connectedCallback(){this._update()}attributeChangedCallback(){this._update()}_shadow(){if(!this.shadowRoot)try{this.attachShadow({mode:"open"})}catch(t){if(!(t instanceof Error&&"NotSupportedError"===t.name))throw t}return this.shadowRoot}_update(){const t=this._shadow();if(t){const e=i?`<style>:host { ${i} }</style>`:"";let n="<slot></slot>";const{autoScaling:s}=this.dataset;if(void 0!==s){n=`<marp-auto-scaling exportparts="svg:auto-scaling" ${"downscale-only"===s?"data-downscale-only":""}>${n}</marp-auto-scaling>`}t.innerHTML=e+n}}};let o;const a=Symbol();let l;const c="marpitSVGPolyfill:setZoomFactor,",d=Symbol(),h=Symbol();const g=()=>{const t="Apple Computer, Inc."===navigator.vendor,e=t?[u]:[],i={then:e=>(t?(async()=>{if(void 0===l){const t=document.createElement("canvas");t.width=10,t.height=10;const e=t.getContext("2d"),i=new Image(10,10),n=new Promise((t=>{i.addEventListener("load",(()=>t()))}));i.crossOrigin="anonymous",i.src="data:image/svg+xml;charset=utf8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2210%22%20height%3D%2210%22%20viewBox%3D%220%200%201%201%22%3E%3CforeignObject%20width%3D%221%22%20height%3D%221%22%20requiredExtensions%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%3E%3Cdiv%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%20style%3D%22width%3A%201px%3B%20height%3A%201px%3B%20background%3A%20red%3B%20position%3A%20relative%22%3E%3C%2Fdiv%3E%3C%2FforeignObject%3E%3C%2Fsvg%3E",await n,e.drawImage(i,0,0),l=e.getImageData(5,5,1,1).data[3]<128}return l})().then((t=>{null==e||e(t?[u]:[])})):null==e||e([]),i)};return Object.assign(e,i)};let p,m;function u(t){const e="object"==typeof t&&t.target||document,i="object"==typeof t?t.zoom:t;window[h]||(Object.defineProperty(window,h,{configurable:!0,value:!0}),document.body.style.zoom=1.0001,document.body.offsetHeight,document.body.style.zoom=1,window.addEventListener("message",(({data:t,origin:e})=>{if(e===window.origin)try{if(t&&"string"==typeof t&&t.startsWith(c)){const[,e]=t.split(","),i=Number.parseFloat(e);Number.isNaN(i)||(m=i)}}catch(t){console.error(t)}})));let n=!1;Array.from(e.querySelectorAll("svg[data-marpit-svg]"),(t=>{var e,s,r,o;t.style.transform||(t.style.transform="translateZ(0)");const a=i||m||t.currentScale||1;p!==a&&(p=a,n=a);const l=t.getBoundingClientRect(),{length:c}=t.children;for(let i=0;i<c;i+=1){const n=t.children[i];if(n.getScreenCTM){const t=n.getScreenCTM();if(t){const i=null!==(s=null===(e=n.x)||void 0===e?void 0:e.baseVal.value)&&void 0!==s?s:0,c=null!==(o=null===(r=n.y)||void 0===r?void 0:r.baseVal.value)&&void 0!==o?o:0,d=n.children.length;for(let e=0;e<d;e+=1){const s=n.children[e];if("SECTION"===s.tagName){const{style:e}=s;e.transformOrigin||(e.transformOrigin=`${-i}px ${-c}px`),e.transform=`scale(${a}) matrix(${t.a}, ${t.b}, ${t.c}, ${t.d}, ${t.e-l.left}, ${t.f-l.top}) translateZ(0.0001px)`;break}}}}}})),!1!==n&&Array.from(e.querySelectorAll("iframe"),(({contentWindow:t})=>{null==t||t.postMessage(`${c}${n}`,"null"===window.origin?"*":window.origin)}))}function v({once:t=!1,target:e=document}={}){const i=function(t=document){if(t[d])return t[d];let e=!0;const i=()=>{e=!1,delete t[d]};Object.defineProperty(t,d,{configurable:!0,value:i});let n=[],s=!1;(async()=>{try{n=await g()}finally{s=!0}})();const r=()=>{for(const e of n)e({target:t});s&&0===n.length||e&&window.requestAnimationFrame(r)};return r(),i}(e);return t?(i(),()=>{}):i}p=1,m=void 0;const w=Symbol(),b=(e=document)=>{if("undefined"==typeof window)throw new Error("Marp Core's browser script is valid only in browser context.");if(((e=document)=>{const i=window[a];i||customElements.define("marp-auto-scaling",s);for(const n of Object.keys(t)){const s=`marp-${n}`,a=t[n].proto();(o??(o=!!document.createElement("div",{is:"marp-auto-scaling"}).outerHTML.startsWith("<div is"),o))&&a!==HTMLElement?i||customElements.define(s,r(a,{style:t[n].style}),{extends:n}):(i||customElements.define(s,r(HTMLElement,t[n])),e.querySelectorAll(`${n}[is="${s}"]`).forEach((t=>{t.outerHTML=t.outerHTML.replace(new RegExp(`^<${n}`,"i"),`<${s}`).replace(new RegExp(`</${n}>$`,"i"),`</${s}>`)})))}window[a]=!0})(e),e[w])return e[w];const i=v({target:e}),n=()=>{i(),delete e[w]},l=Object.assign(n,{cleanup:n,update:()=>b(e)});return Object.defineProperty(e,w,{configurable:!0,value:l}),l},y=document.currentScript;b(y?y.getRootNode():document)}();
</script></foreignObject></svg></div><div class="bespoke-marp-note" data-index="41" tabindex="0"><p>Mermaid.js CDN</p></div><script>/*!! License: https://unpkg.com/@marp-team/marp-cli@4.0.3/lib/bespoke.js.LICENSE.txt */
!function(){"use strict";function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var t,n,r=(n||(n=1,t={from:function(e,t){var n,r=1===(e.parent||e).nodeType?e.parent||e:document.querySelector(e.parent||e),o=[].filter.call("string"==typeof e.slides?r.querySelectorAll(e.slides):e.slides||r.children,(function(e){return"SCRIPT"!==e.nodeName})),a={},i=function(e,t){return(t=t||{}).index=o.indexOf(e),t.slide=e,t},s=function(e,t){a[e]=(a[e]||[]).filter((function(e){return e!==t}))},c=function(e,t){return(a[e]||[]).reduce((function(e,n){return e&&!1!==n(t)}),!0)},l=function(e,t){o[e]&&(n&&c("deactivate",i(n,t)),n=o[e],c("activate",i(n,t)))},d=function(e,t){var r=o.indexOf(n)+e;c(e>0?"next":"prev",i(n,t))&&l(r,t)},u={off:s,on:function(e,t){return(a[e]||(a[e]=[])).push(t),s.bind(null,e,t)},fire:c,slide:function(e,t){if(!arguments.length)return o.indexOf(n);c("slide",i(o[e],t))&&l(e,t)},next:d.bind(null,1),prev:d.bind(null,-1),parent:r,slides:o,destroy:function(e){c("destroy",i(n,e)),a={}}};return(t||[]).forEach((function(e){e(u)})),n||l(0),u}}),t),o=e(r);const a=document.body,i=(...e)=>history.replaceState(...e),s="",c="presenter",l="next",d=["",c,l],u="bespoke-marp-",f=`data-${u}`,m=(e,{protocol:t,host:n,pathname:r,hash:o}=location)=>{const a=e.toString();return`${t}//${n}${r}${a?"?":""}${a}${o}`},g=()=>a.dataset.bespokeView,p=e=>new URLSearchParams(location.search).get(e),v=(e,t={})=>{const n={location,setter:i,...t},r=new URLSearchParams(n.location.search);for(const t of Object.keys(e)){const n=e[t];"string"==typeof n?r.set(t,n):r.delete(t)}try{n.setter({...window.history.state??{}},"",m(r,n.location))}catch(e){console.error(e)}},h=(()=>{const e="bespoke-marp";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch{return!1}})(),y=e=>{try{return localStorage.getItem(e)}catch{return null}},b=(e,t)=>{try{return localStorage.setItem(e,t),!0}catch{return!1}},w=e=>{try{return localStorage.removeItem(e),!0}catch{return!1}},x=(e,t)=>{const n="aria-hidden";t?e.setAttribute(n,"true"):e.removeAttribute(n)},k=e=>{e.parent.classList.add(`${u}parent`),e.slides.forEach((e=>e.classList.add(`${u}slide`))),e.on("activate",(t=>{const n=`${u}active`,r=t.slide,o=r.classList,a=!o.contains(n);if(e.slides.forEach((e=>{e.classList.remove(n),x(e,!0)})),o.add(n),x(r,!1),a){const e=`${n}-ready`;o.add(e),document.body.clientHeight,o.remove(e)}}))},$=e=>{let t=0,n=0;Object.defineProperty(e,"fragments",{enumerable:!0,value:e.slides.map((e=>[null,...e.querySelectorAll("[data-marpit-fragment]")]))});const r=r=>void 0!==e.fragments[t][n+r],o=(r,o)=>{t=r,n=o,e.fragments.forEach(((e,t)=>{e.forEach(((e,n)=>{if(null==e)return;const a=t<r||t===r&&n<=o;e.setAttribute(`${f}fragment`,(a?"":"in")+"active");const i=`${f}current-fragment`;t===r&&n===o?e.setAttribute(i,"current"):e.removeAttribute(i)}))})),e.fragmentIndex=o;const a={slide:e.slides[r],index:r,fragments:e.fragments[r],fragmentIndex:o};e.fire("fragment",a)};e.on("next",(({fragment:a=!0})=>{if(a){if(r(1))return o(t,n+1),!1;const a=t+1;e.fragments[a]&&o(a,0)}else{const r=e.fragments[t].length;if(n+1<r)return o(t,r-1),!1;const a=e.fragments[t+1];a&&o(t+1,a.length-1)}})),e.on("prev",(({fragment:a=!0})=>{if(r(-1)&&a)return o(t,n-1),!1;const i=t-1;e.fragments[i]&&o(i,e.fragments[i].length-1)})),e.on("slide",(({index:t,fragment:n})=>{let r=0;if(void 0!==n){const o=e.fragments[t];if(o){const{length:e}=o;r=-1===n?e-1:Math.min(Math.max(n,0),e-1)}}o(t,r)})),o(0,0)},E=document,L=()=>!(!E.fullscreenEnabled&&!E.webkitFullscreenEnabled),S=()=>!(!E.fullscreenElement&&!E.webkitFullscreenElement),P=e=>{e.fullscreen=()=>{L()&&(async()=>{S()?(E.exitFullscreen||E.webkitExitFullscreen)?.call(E):((e=E.body)=>{(e.requestFullscreen||e.webkitRequestFullscreen)?.call(e)})()})()},document.addEventListener("keydown",(t=>{"f"!==t.key&&"F11"!==t.key||t.altKey||t.ctrlKey||t.metaKey||!L()||(e.fullscreen(),t.preventDefault())}))},_=`${u}inactive`,T=(e=2e3)=>({parent:t,fire:n})=>{const r=t.classList,o=e=>n(`marp-${e?"":"in"}active`);let a;const i=()=>{a&&clearTimeout(a),a=setTimeout((()=>{r.add(_),o()}),e),r.contains(_)&&(r.remove(_),o(!0))};for(const e of["mousedown","mousemove","touchend"])document.addEventListener(e,i);setTimeout(i,0)},I=["AUDIO","BUTTON","INPUT","SELECT","TEXTAREA","VIDEO"],M=e=>{e.parent.addEventListener("keydown",(e=>{if(!e.target)return;const t=e.target;(I.includes(t.nodeName)||"true"===t.contentEditable)&&e.stopPropagation()}))},O=e=>{window.addEventListener("load",(()=>{for(const t of e.slides){const e=t.querySelector("marp-auto-scaling, [data-auto-scaling], [data-marp-fitting]");t.setAttribute(`${f}load`,e?"":"hideable")}}))},A=({interval:e=250}={})=>t=>{document.addEventListener("keydown",(e=>{if(" "===e.key&&e.shiftKey)t.prev();else if("ArrowLeft"===e.key||"ArrowUp"===e.key||"PageUp"===e.key)t.prev({fragment:!e.shiftKey});else if(" "!==e.key||e.shiftKey)if("ArrowRight"===e.key||"ArrowDown"===e.key||"PageDown"===e.key)t.next({fragment:!e.shiftKey});else if("End"===e.key)t.slide(t.slides.length-1,{fragment:-1});else{if("Home"!==e.key)return;t.slide(0)}else t.next();e.preventDefault()}));let n,r,o=0;t.parent.addEventListener("wheel",(a=>{let i=!1;const s=(e,t)=>{e&&(i=i||((e,t)=>((e,t)=>{const n="X"===t?"Width":"Height";return e[`client${n}`]<e[`scroll${n}`]})(e,t)&&((e,t)=>{const{overflow:n}=e,r=e[`overflow${t}`];return"auto"===n||"scroll"===n||"auto"===r||"scroll"===r})(getComputedStyle(e),t))(e,t)),e?.parentElement&&s(e.parentElement,t)};if(0!==a.deltaX&&s(a.target,"X"),0!==a.deltaY&&s(a.target,"Y"),i)return;a.preventDefault();const c=Math.sqrt(a.deltaX**2+a.deltaY**2);if(void 0!==a.wheelDelta){if(void 0===a.webkitForce&&Math.abs(a.wheelDelta)<40)return;if(a.deltaMode===a.DOM_DELTA_PIXEL&&c<4)return}else if(a.deltaMode===a.DOM_DELTA_PIXEL&&c<12)return;r&&clearTimeout(r),r=setTimeout((()=>{n=0}),e);const l=Date.now()-o<e,d=c<=n;if(n=c,l||d)return;let u;(a.deltaX>0||a.deltaY>0)&&(u="next"),(a.deltaX<0||a.deltaY<0)&&(u="prev"),u&&(t[u](),o=Date.now())}))},C=(e=`.${u}osc`)=>{const t=document.querySelector(e);if(!t)return()=>{};const n=(e,n)=>{t.querySelectorAll(`[${f}osc=${JSON.stringify(e)}]`).forEach(n)};return L()||n("fullscreen",(e=>e.style.display="none")),h||n("presenter",(e=>{e.disabled=!0,e.title="Presenter view is disabled due to restricted localStorage."})),e=>{t.addEventListener("click",(t=>{if(t.target instanceof HTMLElement){const{bespokeMarpOsc:n}=t.target.dataset;n&&t.target.blur();const r={fragment:!t.shiftKey};"next"===n?e.next(r):"prev"===n?e.prev(r):"fullscreen"===n?e?.fullscreen():"presenter"===n&&e.openPresenterView()}})),e.parent.appendChild(t),e.on("activate",(({index:t})=>{n("page",(n=>n.textContent=`Page ${t+1} of ${e.slides.length}`))})),e.on("fragment",(({index:t,fragments:r,fragmentIndex:o})=>{n("prev",(e=>e.disabled=0===t&&0===o)),n("next",(n=>n.disabled=t===e.slides.length-1&&o===r.length-1))})),e.on("marp-active",(()=>x(t,!1))),e.on("marp-inactive",(()=>x(t,!0))),L()&&(e=>{for(const t of["","webkit"])E.addEventListener(t+"fullscreenchange",e)})((()=>n("fullscreen",(e=>e.classList.toggle("exit",L()&&S())))))}},D=e=>{window.addEventListener("message",(t=>{if(t.origin!==window.origin)return;const[n,r]=t.data.split(":");if("navigate"===n){const[t,n]=r.split(",");let o=Number.parseInt(t,10),a=Number.parseInt(n,10)+1;a>=e.fragments[o].length&&(o+=1,a=0),e.slide(o,{fragment:a})}}))};var N,B,q,K,j,F,V,U={exports:{}},X=(N||(N=1,U.exports=(B=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],q=function(e){return String(e).replace(/[&<>"']/g,(function(e){return"&"+K[e]+";"}))},K={"&":"amp","<":"lt",">":"gt",'"':"quot","'":"apos"},j="dangerouslySetInnerHTML",F={className:"class",htmlFor:"for"},V={},function(e,t){var n=[],r="";t=t||{};for(var o=arguments.length;o-- >2;)n.push(arguments[o]);if("function"==typeof e)return t.children=n.reverse(),e(t);if(e){if(r+="<"+e,t)for(var a in t)!1!==t[a]&&null!=t[a]&&a!==j&&(r+=" "+(F[a]?F[a]:q(a))+'="'+q(t[a])+'"');r+=">"}if(-1===B.indexOf(e)){if(t[j])r+=t[j].__html;else for(;n.length;){var i=n.pop();if(i)if(i.pop)for(var s=i.length;s--;)n.push(i[s]);else r+=!0===V[i]?i:q(i)}r+=e?"</"+e+">":""}return V[r]=!0,r})),U.exports),H=e(X);const R=({children:e})=>H(null,null,...e),W=`${u}presenter-`,J={container:`${W}container`,dragbar:`${W}dragbar-container`,next:`${W}next`,nextContainer:`${W}next-container`,noteContainer:`${W}note-container`,noteWrapper:`${W}note-wrapper`,noteButtons:`${W}note-buttons`,infoContainer:`${W}info-container`,infoPage:`${W}info-page`,infoPageText:`${W}info-page-text`,infoPagePrev:`${W}info-page-prev`,infoPageNext:`${W}info-page-next`,noteButtonsBigger:`${W}note-bigger`,noteButtonsSmaller:`${W}note-smaller`,infoTime:`${W}info-time`,infoTimer:`${W}info-timer`},Y=e=>{const{title:t}=document;document.title="[Presenter view]"+(t?` - ${t}`:"");const n={},r=e=>(n[e]=n[e]||document.querySelector(`.${e}`),n[e]);document.body.appendChild((e=>{const t=document.createElement("div");return t.className=J.container,t.appendChild(e),t.insertAdjacentHTML("beforeend",H(R,null,H("div",{class:J.nextContainer},H("iframe",{class:J.next,src:"?view=next"})),H("div",{class:J.dragbar}),H("div",{class:J.noteContainer},H("div",{class:J.noteWrapper}),H("div",{class:J.noteButtons},H("button",{class:J.noteButtonsSmaller,tabindex:"-1",title:"Smaller notes font size"},"Smaller notes font size"),H("button",{class:J.noteButtonsBigger,tabindex:"-1",title:"Bigger notes font size"},"Bigger notes font size"))),H("div",{class:J.infoContainer},H("div",{class:J.infoPage},H("button",{class:J.infoPagePrev,tabindex:"-1",title:"Previous"},"Previous"),H("span",{class:J.infoPageText}),H("button",{class:J.infoPageNext,tabindex:"-1",title:"Next"},"Next")),H("time",{class:J.infoTime,title:"Current time"}),H("time",{class:J.infoTimer,title:"Timer"})))),t})(e.parent)),(e=>{let t=!1;r(J.dragbar).addEventListener("mousedown",(()=>{t=!0,r(J.dragbar).classList.add("active")})),window.addEventListener("mouseup",(()=>{t=!1,r(J.dragbar).classList.remove("active")})),window.addEventListener("mousemove",(e=>{if(!t)return;const n=e.clientX/document.documentElement.clientWidth*100;r(J.container).style.setProperty("--bespoke-marp-presenter-split-ratio",`${Math.max(0,Math.min(100,n))}%`)})),r(J.nextContainer).addEventListener("click",(()=>e.next()));const n=r(J.next),o=(a=n,(e,t)=>a.contentWindow?.postMessage(`navigate:${e},${t}`,"null"===window.origin?"*":window.origin));var a;n.addEventListener("load",(()=>{r(J.nextContainer).classList.add("active"),o(e.slide(),e.fragmentIndex),e.on("fragment",(({index:e,fragmentIndex:t})=>o(e,t)))}));const i=document.querySelectorAll(".bespoke-marp-note");i.forEach((e=>{e.addEventListener("keydown",(e=>e.stopPropagation())),r(J.noteWrapper).appendChild(e)})),e.on("activate",(()=>i.forEach((t=>t.classList.toggle("active",t.dataset.index==e.slide())))));let s=0;const c=e=>{s=Math.max(-5,s+e),r(J.noteContainer).style.setProperty("--bespoke-marp-note-font-scale",(1.2**s).toFixed(4))},l=()=>c(1),d=()=>c(-1),u=r(J.noteButtonsBigger),f=r(J.noteButtonsSmaller);u.addEventListener("click",(()=>{u.blur(),l()})),f.addEventListener("click",(()=>{f.blur(),d()})),document.addEventListener("keydown",(e=>{"+"===e.key&&l(),"-"===e.key&&d()}),!0),e.on("activate",(({index:t})=>{r(J.infoPageText).textContent=`${t+1} / ${e.slides.length}`}));const m=r(J.infoPagePrev),g=r(J.infoPageNext);m.addEventListener("click",(t=>{m.blur(),e.prev({fragment:!t.shiftKey})})),g.addEventListener("click",(t=>{g.blur(),e.next({fragment:!t.shiftKey})})),e.on("fragment",(({index:t,fragments:n,fragmentIndex:r})=>{m.disabled=0===t&&0===r,g.disabled=t===e.slides.length-1&&r===n.length-1}));let p=new Date;const v=()=>{const e=new Date,t=e=>`${Math.floor(e)}`.padStart(2,"0"),n=e.getTime()-p.getTime(),o=t(n/1e3%60),a=t(n/1e3/60%60),i=t(n/36e5%24);r(J.infoTime).textContent=e.toLocaleTimeString(),r(J.infoTimer).textContent=`${i}:${a}:${o}`};v(),setInterval(v,250),r(J.infoTimer).addEventListener("click",(()=>{p=new Date}))})(e)},z=e=>{if(!(e=>e.syncKey&&"string"==typeof e.syncKey)(e))throw new Error("The current instance of Bespoke.js is invalid for Marp bespoke presenter plugin.");Object.defineProperties(e,{openPresenterView:{enumerable:!0,value:G},presenterUrl:{enumerable:!0,get:Q}}),h&&document.addEventListener("keydown",(t=>{"p"!==t.key||t.altKey||t.ctrlKey||t.metaKey||(t.preventDefault(),e.openPresenterView())}))};function G(){const{max:e,floor:t}=Math,n=e(t(.85*window.innerWidth),640),r=e(t(.85*window.innerHeight),360);return window.open(this.presenterUrl,W+this.syncKey,`width=${n},height=${r},menubar=no,toolbar=no`)}function Q(){const e=new URLSearchParams(location.search);return e.set("view","presenter"),e.set("sync",this.syncKey),m(e)}const Z=e=>{const t=g();return t===l&&e.appendChild(document.createElement("span")),{[s]:z,[c]:Y,[l]:D}[t]},ee=e=>{e.on("activate",(t=>{document.querySelectorAll(".bespoke-progress-parent > .bespoke-progress-bar").forEach((n=>{n.style.flexBasis=100*t.index/(e.slides.length-1)+"%"}))}))},te=e=>{const t=Number.parseInt(e,10);return Number.isNaN(t)?null:t},ne=(e={})=>{const t={history:!0,...e};return e=>{let n=!0;const r=e=>{const t=n;try{return n=!0,e()}finally{n=t}},o=(t={fragment:!0})=>{let n=t.fragment?te(p("f")||""):null;((t,n)=>{const{min:r,max:o}=Math,{fragments:a,slides:i}=e,s=o(0,r(t,i.length-1)),c=o(0,r(n||0,a[s].length-1));s===e.slide()&&c===e.fragmentIndex||e.slide(s,{fragment:c})})((()=>{if(location.hash){const[t]=location.hash.slice(1).split(":~:");if(/^\d+$/.test(t))return(te(t)??1)-1;const r=document.getElementById(t)||document.querySelector(`a[name="${CSS.escape(t)}"]`);if(r){const{length:t}=e.slides;for(let o=0;o<t;o+=1)if(e.slides[o].contains(r)){const t=e.fragments?.[o],a=r.closest("[data-marpit-fragment]");if(t&&a){const e=t.indexOf(a);e>=0&&(n=e)}return o}}}return 0})(),n)};e.on("fragment",(({index:e,fragmentIndex:r})=>{n||v({f:0===r||r.toString()},{location:{...location,hash:`#${e+1}`},setter:(...e)=>t.history?history.pushState(...e):history.replaceState(...e)})})),setTimeout((()=>{o(),window.addEventListener("hashchange",(()=>r((()=>{o({fragment:!1}),v({f:void 0})})))),window.addEventListener("popstate",(()=>{n||r((()=>o()))})),n=!1}),0)}},re=(e={})=>{const t=e.key||window.history.state?.marpBespokeSyncKey||Math.random().toString(36).slice(2),n=`bespoke-marp-sync-${t}`;var r;r={marpBespokeSyncKey:t},v({},{setter:(e,...t)=>i({...e,...r},...t)});const o=()=>{const e=y(n);return e?JSON.parse(e):Object.create(null)},a=e=>{const t=o(),r={...t,...e(t)};return b(n,JSON.stringify(r)),r},s=()=>{window.removeEventListener("pageshow",s),a((e=>({reference:(e.reference||0)+1})))};return e=>{s(),Object.defineProperty(e,"syncKey",{value:t,enumerable:!0});let r=!0;setTimeout((()=>{e.on("fragment",(e=>{r&&a((()=>({index:e.index,fragmentIndex:e.fragmentIndex})))}))}),0),window.addEventListener("storage",(t=>{if(t.key===n&&t.oldValue&&t.newValue){const n=JSON.parse(t.oldValue),o=JSON.parse(t.newValue);if(n.index!==o.index||n.fragmentIndex!==o.fragmentIndex)try{r=!1,e.slide(o.index,{fragment:o.fragmentIndex,forSync:!0})}finally{r=!0}}}));const i=()=>{const{reference:e}=o();void 0===e||e<=1?w(n):a((()=>({reference:e-1})))};window.addEventListener("pagehide",(e=>{e.persisted&&window.addEventListener("pageshow",s),i()})),e.on("destroy",i)}},{PI:oe,abs:ae,sqrt:ie,atan2:se}=Math,ce={passive:!0},le=({slope:e=-.7,swipeThreshold:t=30}={})=>n=>{let r;const o=n.parent,a=e=>{const t=o.getBoundingClientRect();return{x:e.pageX-(t.left+t.right)/2,y:e.pageY-(t.top+t.bottom)/2}};o.addEventListener("touchstart",(({touches:e})=>{r=1===e.length?a(e[0]):void 0}),ce),o.addEventListener("touchmove",(e=>{if(r)if(1===e.touches.length){e.preventDefault();const t=a(e.touches[0]),n=t.x-r.x,o=t.y-r.y;r.delta=ie(ae(n)**2+ae(o)**2),r.radian=se(n,o)}else r=void 0})),o.addEventListener("touchend",(o=>{if(r){if(r.delta&&r.delta>=t&&r.radian){const t=(r.radian-e+oe)%(2*oe)-oe;n[t<0?"next":"prev"](),o.stopPropagation()}r=void 0}}),ce)},de=new Map;de.clear(),de.set("none",{backward:{both:void 0,incoming:void 0,outgoing:void 0},forward:{both:void 0,incoming:void 0,outgoing:void 0}});const ue={both:"",outgoing:"outgoing-",incoming:"incoming-"},fe={forward:"",backward:"-backward"},me=e=>`--marp-bespoke-transition-animation-${e}`,ge=e=>`--marp-transition-${e}`,pe=me("name"),ve=me("duration"),he=e=>new Promise((t=>{const n={},r=document.createElement("div"),o=e=>{r.remove(),t(e)};r.addEventListener("animationstart",(()=>o(n))),Object.assign(r.style,{animationName:e,animationDuration:"1s",animationFillMode:"both",animationPlayState:"paused",position:"absolute",pointerEvents:"none"}),document.body.appendChild(r);const a=getComputedStyle(r).getPropertyValue(ge("duration"));a&&(n.defaultDuration=a),((e,t)=>{requestAnimationFrame((()=>{e.style.animationPlayState="running",requestAnimationFrame((()=>t(void 0)))}))})(r,o)})),ye=async e=>de.has(e)?de.get(e):(e=>{const t={},n=[];for(const[r,o]of Object.entries(ue))for(const[a,i]of Object.entries(fe)){const s=`marp-${o}transition${i}-${e}`;n.push(he(s).then((e=>{t[a]=t[a]||{},t[a][r]=e?{...e,name:s}:void 0})))}return Promise.all(n).then((()=>t))})(e).then((t=>(de.set(e,t),t))),be=e=>Object.values(e).flatMap(Object.values).every((e=>!e)),we=(e,{type:t,backward:n})=>{const r=e[n?"backward":"forward"],o=(()=>{const e=r[t],n=e=>({[pe]:e.name});if(e)return n(e);if(r.both){const e=n(r.both);return"incoming"===t&&(e[me("direction")]="reverse"),e}})();return!o&&n?we(e,{type:t,backward:!1}):o||{[pe]:"__bespoke_marp_transition_no_animation__"}},xe=e=>{if(e)try{const t=JSON.parse(e);if((e=>{if("object"!=typeof e)return!1;const t=e;return"string"==typeof t.name&&(void 0===t.duration||"string"==typeof t.duration)})(t))return t}catch{}},ke="_tSId",$e="_tA",Ee="bespoke-marp-transition-warming-up",Le=window.matchMedia("(prefers-reduced-motion: reduce)"),Se="__bespoke_marp_transition_reduced_outgoing__",Pe="__bespoke_marp_transition_reduced_incoming__",_e={forward:{both:void 0,incoming:{name:Pe},outgoing:{name:Se}},backward:{both:void 0,incoming:{name:Pe},outgoing:{name:Se}}},Te=e=>{if(!document.startViewTransition)return;const t=t=>(void 0!==t&&(e._tD=t),e._tD);let n;t(!1),((...e)=>{const t=[...new Set(e).values()];return Promise.all(t.map((e=>ye(e)))).then()})(...Array.from(document.querySelectorAll("section[data-transition], section[data-transition-back]")).flatMap((e=>[e.dataset.transition,e.dataset.transitionBack].flatMap((e=>{const t=xe(e);return[t?.name,t?.builtinFallback?`__builtin__${t.name}`:void 0]})).filter((e=>!!e))))).then((()=>{document.querySelectorAll("style").forEach((e=>{e.innerHTML=e.innerHTML.replace(/--marp-transition-duration:[^;}]*[;}]/g,(e=>e.slice(0,-1)+"!important"+e.slice(-1)))}))}));const r=(n,{back:r,cond:o})=>a=>{const i=t();if(i)return!!a[$e]||!("object"!=typeof i||(i.skipTransition(),!a.forSync));if(!o(a))return!0;const s=e.slides[e.slide()],c=()=>a.back??r,l="data-transition"+(c()?"-back":""),d=s.querySelector(`section[${l}]`);if(!d)return!0;const u=xe(d.getAttribute(l)??void 0);return!u||((async(e,{builtinFallback:t=!0}={})=>{let n=await ye(e);if(be(n)){if(!t)return;return n=await ye(`__builtin__${e}`),be(n)?void 0:n}return n})(u.name,{builtinFallback:u.builtinFallback}).then((e=>{if(!e){t(!0);try{n(a)}finally{t(!1)}return}let r=e;Le.matches&&(console.warn("Use a constant animation to transition because preferring reduced motion by viewer has detected."),r=_e);const o=document.getElementById(ke);o&&o.remove();const i=document.createElement("style");i.id=ke,document.head.appendChild(i),((e,t)=>{const n=[`:root{${ge("direction")}:${t.backward?-1:1};}`,":root:has(.bespoke-marp-inactive){cursor:none;}"],r=t=>{const n=e[t].both?.defaultDuration||e[t].outgoing?.defaultDuration||e[t].incoming?.defaultDuration;return"forward"===t?n:n||r("forward")},o=t.duration||r(t.backward?"backward":"forward");void 0!==o&&n.push(`::view-transition-group(*){${ve}:${o};}`);const a=e=>Object.entries(e).map((([e,t])=>`${e}:${t};`)).join("");return n.push(`::view-transition-old(root){${a(we(e,{...t,type:"outgoing"}))}}`,`::view-transition-new(root){${a(we(e,{...t,type:"incoming"}))}}`),n})(r,{backward:c(),duration:u.duration}).forEach((e=>i.sheet?.insertRule(e)));const s=document.documentElement.classList;s.add(Ee);let l=!1;const d=()=>{l||(n(a),l=!0,s.remove(Ee))},f=()=>{t(!1),i.remove(),s.remove(Ee)};try{t(!0);const e=document.startViewTransition(d);t(e),e.finished.finally(f)}catch(e){console.error(e),d(),f()}})),!1)};e.on("prev",r((t=>e.prev({...t,[$e]:!0})),{back:!0,cond:e=>e.index>0&&!((e.fragment??1)&&n.fragmentIndex>0)})),e.on("next",r((t=>e.next({...t,[$e]:!0})),{cond:t=>t.index+1<e.slides.length&&!(n.fragmentIndex+1<n.fragments.length)})),setTimeout((()=>{e.on("slide",r((t=>e.slide(t.index,{...t,[$e]:!0})),{cond:t=>{const n=e.slide();return t.index!==n&&(t.back=t.index<n,!0)}}))}),0),e.on("fragment",(e=>{n=e}))};let Ie;const Me=()=>(void 0===Ie&&(Ie="wakeLock"in navigator&&navigator.wakeLock),Ie),Oe=async()=>{const e=Me();if(e)try{return await e.request("screen")}catch(e){console.warn(e)}return null},Ae=async()=>{if(!Me())return;let e;const t=()=>{e&&"visible"===document.visibilityState&&Oe()};for(const e of["visibilitychange","fullscreenchange"])document.addEventListener(e,t);return e=await Oe(),e};((e=document.getElementById(":$p"))=>{(()=>{const e=p("view");a.dataset.bespokeView=e===l||e===c?e:""})();const t=(e=>{const t=p(e);return v({[e]:void 0}),t})("sync")||void 0;o.from(e,((...e)=>{const t=d.findIndex((e=>g()===e));return e.map((([e,n])=>e[t]&&n)).filter((e=>e))})([[1,1,0],re({key:t})],[[1,1,1],Z(e)],[[1,1,0],M],[[1,1,1],k],[[1,0,0],T()],[[1,1,1],O],[[1,1,1],ne({history:!1})],[[1,1,0],A()],[[1,1,0],P],[[1,0,0],ee],[[1,1,0],le()],[[1,0,0],C()],[[1,0,0],Te],[[1,1,1],$],[[1,1,0],Ae]))})()}();</script><script>window.__marpCliWatchWS="ws://localhost:37717/9b3b44858e437045e7a716850855294b094e50b53eb4f188b499235424f3cf98";!function(){"use strict";const e=(n,o=!1)=>{const t=new WebSocket(n);return t.addEventListener("open",(()=>{console.info("[Marp CLI] Observing the change of file..."),o&&location.reload()})),t.addEventListener("close",(()=>{console.warn("[Marp CLI] WebSocket for file watcher was disconnected. Try re-connecting in 5000ms..."),setTimeout((()=>e(n,!0)),5e3)})),t.addEventListener("message",(e=>{"reload"===e.data&&location.reload()})),t};(()=>{const n=window.__marpCliWatchWS;n&&e(n)})()}();</script></body></html>